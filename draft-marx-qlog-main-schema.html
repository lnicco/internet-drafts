<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Main logging schema for qlog</title>
<meta content="Robin Marx" name="author">
<meta content="
       This document describes a high-level schema for a standardized logging format
called qlog.  This format allows easy sharing of data and the creation of reusable
visualization and debugging tools. The high-level schema in this document is
intended to be protocol-agnostic. Separate documents specify how the format should
be used for specific protocol data. The schema is also format-agnostic, and can be
represented in for example JSON, csv or protobuf. 
    " name="description">
<meta content="xml2rfc 2.47.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-marx-qlog-main-schema-latest" name="ietf.draft">
<link href="draft-marx-qlog-main-schema.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@import url('https://martinthomson.github.io/i-d-template/fonts.css');

html {
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --small-font-size: 14.5px;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
#title {
  padding: 1em 0 0.2em;
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1, h2, h3 {
  font-size: 22px;
  line-height: 26px;
}
h4, h5, h6 {
  font-size: 18px;
  line-height: 22px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p, #abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 18px;
  line-height: 24px;
}
p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
dd.break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px 'Oxygen Mono', monospace;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  pre {
    display: inline-block;
    overflow-x: auto;
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  pre + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
  table {
    display: inline-block;
    overflow-x: auto;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
tr:nth-child(2n) > td {
  background-color: var(--background-color);
}
tr:nth-child(2n+1) > td {
  background-color: var(--highlight-color);
}
thead+tbody > tr:nth-child(2n) > td {
  background-color: var(--highlight-color);
}
thead+tbody > tr:nth-child(2n+1) > td {
  background-color: var(--background-color);
}
table caption {
  margin: 0;
  padding: 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  visibility: hidden;
  user-select: none;
}
a.pilcrow[href] { color: #ddd; }
a.pilcrow[href]:hover { text-decoration: none; }
@media screen {
  :hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 8em;
}
#identifiers dt {
  width: var(--identifier-width);
  margin: 0;
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0 0 0 calc(1em + var(--identifier-width));
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 500px) {
  .index ul {
    column-count: 2;
    column-gap: 20px;
  }
  .index ul ul {
    column-count: 1;
    column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul p, #toc ul li {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table .text-left, table .text-left {
  text-align: left;
}
table .text-center, table .text-center {
  text-align: center;
}
table .text-right, table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Main logging schema for qlog</td>
<td class="right">August 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Marx</td>
<td class="center">Expires 20 February 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">QUIC</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-marx-qlog-main-schema-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-08-19" class="published">19 August 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-02-20">20 February 2021</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Marx</div>
<div class="org">Hasselt University</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Main logging schema for qlog</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes a high-level schema for a standardized logging format
called qlog.  This format allows easy sharing of data and the creation of reusable
visualization and debugging tools. The high-level schema in this document is
intended to be protocol-agnostic. Separate documents specify how the format should
be used for specific protocol data. The schema is also format-agnostic, and can be
represented in for example JSON, csv or protobuf.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 20 February 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-notational-conventions" class="xref">Notational Conventions</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-design-goals" class="xref">Design Goals</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-the-high-level-schema" class="xref">The High Level Schema</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-summary-field" class="xref">Summary field</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-traces-field" class="xref">Traces field</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-individual-trace-containers" class="xref">Individual Trace containers</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="xref">3.3.1</a>.  <a href="#name-configuration" class="xref">Configuration</a><a href="#section-toc.1-1.3.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="xref">3.3.2</a>.  <a href="#name-vantage_point" class="xref">vantage_point</a><a href="#section-toc.1-1.3.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.3.2.3">
                    <p id="section-toc.1-1.3.2.3.2.3.1"><a href="#section-3.3.3" class="xref">3.3.3</a>.  <a href="#name-common_fields-and-event_fie" class="xref">common_fields and event_fields</a><a href="#section-toc.1-1.3.2.3.2.3.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-field-name-semantics" class="xref">Field name semantics</a><a href="#section-toc.1-1.3.2.4.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="xref">3.4.1</a>.  <a href="#name-timestamps" class="xref">timestamps</a><a href="#section-toc.1-1.3.2.4.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.4.2.2">
                    <p id="section-toc.1-1.3.2.4.2.2.1"><a href="#section-3.4.2" class="xref">3.4.2</a>.  <a href="#name-group_id" class="xref">group_id</a><a href="#section-toc.1-1.3.2.4.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.4.2.3">
                    <p id="section-toc.1-1.3.2.4.2.3.1"><a href="#section-3.4.3" class="xref">3.4.3</a>.  <a href="#name-category-and-event" class="xref">category and event</a><a href="#section-toc.1-1.3.2.4.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.4.2.4">
                    <p id="section-toc.1-1.3.2.4.2.4.1"><a href="#section-3.4.4" class="xref">3.4.4</a>.  <a href="#name-data" class="xref">data</a><a href="#section-toc.1-1.3.2.4.2.4.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.4.2.5">
                    <p id="section-toc.1-1.3.2.4.2.5.1"><a href="#section-3.4.5" class="xref">3.4.5</a>.  <a href="#name-custom-fields-2" class="xref">custom Fields</a><a href="#section-toc.1-1.3.2.4.2.5.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.4.2.6">
                    <p id="section-toc.1-1.3.2.4.2.6.1"><a href="#section-3.4.6" class="xref">3.4.6</a>.  <a href="#name-event-field-values" class="xref">event field values</a><a href="#section-toc.1-1.3.2.4.2.6.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>.  <a href="#name-triggers" class="xref">Triggers</a><a href="#section-toc.1-1.3.2.5.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-tooling-requirements" class="xref">Tooling requirements</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-methods-of-access-and-gener" class="xref">Methods of Access and Generation</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-via-a-well-known-endpoint" class="xref">via a well-known endpoint</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-notes-on-practical-use" class="xref">Notes on Practical Use</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-guidance-on-exporting-qlog-" class="xref">Guidance on Exporting qlog to a Concrete Format</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-qlog-to-json-mapping" class="xref">qlog to JSON mapping</a><a href="#section-toc.1-1.7.2.1.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.7.2.1.2.1">
                    <p id="section-toc.1-1.7.2.1.2.1.1"><a href="#section-7.1.1" class="xref">7.1.1</a>.  <a href="#name-numbers" class="xref">Numbers</a><a href="#section-toc.1-1.7.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.1.2.2">
                    <p id="section-toc.1-1.7.2.1.2.2.1"><a href="#section-7.1.2" class="xref">7.1.2</a>.  <a href="#name-bytes" class="xref">Bytes</a><a href="#section-toc.1-1.7.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.1.2.3">
                    <p id="section-toc.1-1.7.2.1.2.3.1"><a href="#section-7.1.3" class="xref">7.1.3</a>.  <a href="#name-summarizing-table" class="xref">Summarizing table</a><a href="#section-toc.1-1.7.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-optimization-options" class="xref">Optimization options</a><a href="#section-toc.1-1.7.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-change-log" class="xref">Change Log</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
<ul class="ulEmpty toc compact">
<li class="ulEmpty toc compact" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-a.1" class="xref">A.1</a>.  <a href="#name-since-draft-marx-qlog-main-" class="xref">Since draft-marx-qlog-main-schema-01:</a><a href="#section-toc.1-1.11.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-a.2" class="xref">A.2</a>.  <a href="#name-since-draft-marx-qlog-main-s" class="xref">Since draft-marx-qlog-main-schema-00:</a><a href="#section-toc.1-1.11.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-design-variations" class="xref">Design Variations</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-appendix.c" class="xref">Appendix C</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.13.1" class="pilcrow">¶</a></p>
</li>
          <li class="ulEmpty toc compact" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-appendix.d" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a><a href="#section-toc.1-1.14.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">There is currently a lack of an easily usable, standardized endpoint logging
format. Especially for the use case of debugging and evaluating modern web
protocols and their performance, it is often difficult to obtain structured logs
that provide adequate information for tasks like problem root cause analysis.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This document aims to provide a high-level schema and harness that describes the
general layout of an easily usable, shareable, aggregatable and structured logging
format. This high-level schema is protocol agnostic, with logging entries for
specific protocols and use cases being defined in other documents (see for example
<span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span> for QUIC and HTTP/3-related event definitions).<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">The goal of this high-level schema is to provide amenities and default
characteristics that each logging file should contain (or should be able to
contain), such that generic and reusable toolsets can be created that can deal
with logs from a variety of different protocols and use cases.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">As such, this document contains concepts such as versioning, metadata inclusion,
log aggregation, event grouping and log file size reduction techniques.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">Feedback and discussion welcome at
<a href="https://github.com/quiclog/internet-drafts">https://github.com/quiclog/internet-drafts</a>.
Readers are advised to refer to the "editor's draft" at that URL for an
up-to-date version of this document.<a href="#section-1-5" class="pilcrow">¶</a></p>
<div id="data_types">
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
interpreted as described in <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">While the qlog schema's are format-agnostic, for readability the qlog documents
will use a JSON-inspired format for examples and definitions.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">As qlog can be used both for purely textual but also binary formats, we employ a
custom datatype definition language, inspired loosely by the <a href="https://www.typescriptlang.org/">"TypeScript"
language</a>.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">Other documents will describe how to transform the qlog schema into a specific
format. We include an example of such a transformation for JSON and discuss
options for binary formatting and optimization in <a href="#concrete-formats" class="xref">Section 7</a>.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">The main general conventions a reader should be aware of are:<a href="#section-1.1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-6.1">obj? : this object is optional<a href="#section-1.1-6.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.2">type1 | type2 : a union of these two types (object can be either type1 OR
type2)<a href="#section-1.1-6.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.3">obj:type : this object has this concrete type<a href="#section-1.1-6.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.4">obj:array&lt;type&gt; : this object is an array of this type<a href="#section-1.1-6.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.5">class : defines a new type<a href="#section-1.1-6.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.6">// : single-line comment<a href="#section-1.1-6.6" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.1-7">The main data types are:<a href="#section-1.1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-8.1">int8 : signed 8-bit integer<a href="#section-1.1-8.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.2">int16 : signed 16-bit integer<a href="#section-1.1-8.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.3">int32 : signed 32-bit integer<a href="#section-1.1-8.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.4">int64 : signed 64-bit integer<a href="#section-1.1-8.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.5">uint8 : unsigned 8-bit integer<a href="#section-1.1-8.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.6">uint16 : unsigned 16-bit integer<a href="#section-1.1-8.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.7">uint32 : unsigned 32-bit integer<a href="#section-1.1-8.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.8">uint64 : unsigned 64-bit integer<a href="#section-1.1-8.8" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.9">float : 32-bit floating point value<a href="#section-1.1-8.9" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.10">double : 64-bit floating point value<a href="#section-1.1-8.10" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.11">byte : an individual raw byte (8-bit) value (use array&lt;byte&gt; or the
shorthand bytes to specify a binary blob)<a href="#section-1.1-8.11" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.12">string : list of ASCII encoded characters<a href="#section-1.1-8.12" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.13">boolean : boolean<a href="#section-1.1-8.13" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.14">enum: fixed list of values (Unless explicity defined, the value of an enum entry
is the string version of its name (e.g., initial = "initial"))<a href="#section-1.1-8.14" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.15">any : represents any object type. Mainly used here as a placeholder for more
concrete types defined in related documents (e.g., specific event types)<a href="#section-1.1-8.15" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.1-9">All timestamps in qlog are logged as Unix epoch timestamps as doubles in the
millisecond resolution. All other time-related values (e.g., offsets) are also
always expressed in milliseconds.<a href="#section-1.1-9" class="pilcrow">¶</a></p>
<p id="section-1.1-10">Other qlog documents can define their own types (e.g., separately for each Packet
type a protocol supports).<a href="#section-1.1-10" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="design-goals">
<section id="section-2">
      <h2 id="name-design-goals">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-design-goals" class="section-name selfRef">Design Goals</a>
      </h2>
<p id="section-2-1">The main tenets for the qlog schema design are:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">Streamable, event-based logging<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.2">Flexibility in the format, complexity in the tooling (e.g., few components are a
MUST, tools need to deal with this)<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.3">Extensible and pragmatic (e.g., no complex fixed schema with extension points)<a href="#section-2-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.4">Aggregation and transformation friendly (e.g., the top-level element is a
container for individual traces)<a href="#section-2-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.5">Metadata is stored together with event data<a href="#section-2-2.5" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="the-high-level-schema">
<section id="section-3">
      <h2 id="name-the-high-level-schema">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-the-high-level-schema" class="section-name selfRef">The High Level Schema</a>
      </h2>
<p id="section-3-1">A qlog file should be able to contain several indivdual traces and logs from
multiple vantage points that are in some way related. To that end, the top-level
element in the qlog schema defines only a small set of fields and an array of
component traces. For this document, the "qlog_version" field MUST have a value of
"draft-02-RC1".<a href="#section-3-1" class="pilcrow">¶</a></p>
<span id="name-top-level-element"></span><div id="top_element">
<figure id="figure-1">
        <div class="artwork art-text alignLeft art-json" id="section-3-2.1">
<pre>
Definition:

class LogFile {
    qlog_version:string,
    title?:string,
    description?:string,
    summary?: Summary,
    traces: array&lt;Trace|TraceError&gt;
}

JSON example:
{
    "qlog_version": "draft-02-RC1",
    "title": "Name of this particular qlog file (short)",
    "description": "Description for this group of traces (long)",
    "summary": {
        ...
    }
    "traces": [...]
}
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-top-level-element" class="selfRef">Top-level element</a>
        </figcaption></figure>
</div>
<div id="summary-field">
<section id="section-3.1">
        <h3 id="name-summary-field">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-summary-field" class="section-name selfRef">Summary field</a>
        </h3>
<p id="section-3.1-1">In a real-life deployment with a large amount of generated logs, it can be useful
to sort and filter logs based on some basic summarized or aggregated data (e.g.,
log length, packet loss rate, log location, presence of error events, ...). The
summary field (if present) SHOULD be on top of the qlog file, as this allows for
the file to be processed in a streaming fashion (i.e., the implementation could
just read up to and including the summary field and then only load the full logs
that are deemed interesting by the user).<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">As the summary field is highly deployment-specific, this document does not specify
any default fields or their semantics. Some examples of potential entries are:<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<span id="name-summary-example-definition"></span><div id="summary">
<figure id="figure-2">
          <div class="artwork art-text alignLeft art-json" id="section-3.1-3.1">
<pre>
class Summary {
    // list of fields with any type
}

JSON example:
{
    "trace_count":uint32, // amount of traces in this file
    "max_duration":uint64, // time duration of the longest trace
    "max_outgoing_loss_rate":float, // highest loss rate for outgoing packets over all traces
    "total_event_count":uint64, // total number of events across all traces,
    "error_count":uint64 // total number of error events in this trace
}
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-summary-example-definition" class="selfRef">Summary example definition</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="traces-field">
<section id="section-3.2">
        <h3 id="name-traces-field">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-traces-field" class="section-name selfRef">Traces field</a>
        </h3>
<p id="section-3.2-1">The "traces" array contains a list of individual qlog traces. Typical logs will
only contain a single element in this array. Multiple traces can however be
combined into a single qlog file by taking the "traces" entries for each qlog file
individually and copying them to the "traces" array of a new, aggregated qlog
file. This is typically done in a post-processing step.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">For example, for a test setup, we perform logging on the client, on the server and
on a single point on their common network path. Each of these three logs is first
created separately during the test. Afterwards, the three logs can be aggregated
into a single qlog file.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">For the definition of the Trace type, see <a href="#trace" class="xref">Section 3.3</a>.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">As such, the "traces" array can also contain "error" entries. These indicate that
we tried to find/convert a file for inclusion in the aggregated qlog, but there
was an error during the process. Rather than silently dropping the erroneous file,
we can opt to explicitly include it in the qlog file as an entry in the "traces"
array.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<span id="name-traceerror-definition"></span><div id="traceerror">
<figure id="figure-3">
          <div class="artwork art-text alignLeft art-json" id="section-3.2-5.1">
<pre>
Definition:
class TraceError {
    error_description: string,
    uri?: string,
    vantage_point?: VantagePoint
}

JSON example:
{
    "error_description": "A description of the error (e.g., file could not be found, file had errors, ...)",
    "uri": "the original URI at which we attempted to find the file",
    "vantage_point": see {{vantage_point}} // the vantage point we were expecting to include here
}
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-traceerror-definition" class="selfRef">TraceError definition</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="trace">
<section id="section-3.3">
        <h3 id="name-individual-trace-containers">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-individual-trace-containers" class="section-name selfRef">Individual Trace containers</a>
        </h3>
<p id="section-3.3-1">Each indidivual trace container encompasses a single conceptual trace. The exact
definition of a trace can be fluid. For example, a trace could contain all events
for a single connection, for a single endpoint, for a single measurement interval,
etc.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">In the normal use case, a trace is a log of a single data flow collected at a
single location or vantage point. For example, for QUIC, a single trace only
contains events for a single logical QUIC connection for either the client or the
server. However, a single trace could also combine events from a variety of
vantage points or use cases (e.g., a middlebox could group events from all
observed connections into a single trace).<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">The semantics and context of the trace can be deduced from the entries in the
"common_fields" (specifically the "group_id" field) and "event_fields" lists.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<span id="name-trace-container-definition"></span><div id="trace_container">
<figure id="figure-4">
          <div class="artwork art-text alignLeft art-json" id="section-3.3-4.1">
<pre>
Definition:
class Trace {
    title?: string,
    description?: string,
    configuration?: Configuration,
    common_fields?: CommonFields,
    event_fields?: array&lt;string&gt;,
    vantage_point: VantagePoint,
    events: array&lt;Event&gt;
}

JSON example:
{
    "title": "Name of this particular trace (short)",
    "description": "Description for this trace (long)",
    "configuration": {
        "time_offset": 150
    },
    "common_fields": {
        "ODCID": "be12"
    },
    "event_fields": (see below),
    "vantage_point": {
        "name": "backend-67",
        "type": "server"
    },
    "events": [...]
}
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-trace-container-definition" class="selfRef">Trace container definition</a>
          </figcaption></figure>
</div>
<div id="configuration">
<section id="section-3.3.1">
          <h4 id="name-configuration">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-configuration" class="section-name selfRef">Configuration</a>
          </h4>
<p id="section-3.3.1-1">We take into account that a log file is usually not used in isolation, but by
means of various tools. Especially when aggregating various traces together or
preparing traces for a demonstration, one might wish to persist certain tool-based
settings inside the log file itself. For this, the configuration field is used.<a href="#section-3.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1-2">The configuration field can be viewed as a generic metadata field that tools can
fill with their own fields, based on per-tool logic. It is best practice for tools
to prefix each added field with their tool name to prevent collisions across
tools. This document only defines two optional, standard, tool-independent
configuration settings: "time_offset" and "original_uris".<a href="#section-3.3.1-2" class="pilcrow">¶</a></p>
<span id="name-configuration-definition"></span><div id="configuration_example">
<figure id="figure-5">
            <div class="artwork art-text alignLeft art-json" id="section-3.3.1-3.1">
<pre>
Definition:
class Configuration {
    time_offset:double, // in ms,
    original_uris: array&lt;string&gt;,
    // list of fields with any type
}

Example:
{
    "time_offset": 150, // starts 150ms after the first timestamp indicates
    "original_uris": [
        "https://example.org/trace1.qlog",
        "https://example.org/trace2.qlog"
    ]
}
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-configuration-definition" class="selfRef">Configuration definition</a>
            </figcaption></figure>
</div>
<div id="timeoffset">
<section id="section-3.3.1.1">
            <h5 id="name-time_offset">
<a href="#section-3.3.1.1" class="section-number selfRef">3.3.1.1. </a><a href="#name-time_offset" class="section-name selfRef">time_offset</a>
            </h5>
<p id="section-3.3.1.1-1">time_offset indicates by how many milliseconds the starting time of the current
trace should be offset. This is useful when comparing logs taken from various
systems, where clocks might not be perfectly synchronous. Users could use manual
tools or automated logic to align traces in time and the found optimal offsets can
be stored in this field for future usage. The default value is 0.<a href="#section-3.3.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="originaluris">
<section id="section-3.3.1.2">
            <h5 id="name-original_uris">
<a href="#section-3.3.1.2" class="section-number selfRef">3.3.1.2. </a><a href="#name-original_uris" class="section-name selfRef">original_uris</a>
            </h5>
<p id="section-3.3.1.2-1">This field is used when merging multiple individual qlog files or other source
files (e.g., when converting .pcaps to qlog). It allows to keep better track where
certain data came from. It is a simple array of strings. It is an array instead of
a single string, since a single qlog trace can be made up out of an aggregation of
multiple component qlog traces as well. The default value is an empty array.<a href="#section-3.3.1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="custom-fields">
<section id="section-3.3.1.3">
            <h5 id="name-custom-fields">
<a href="#section-3.3.1.3" class="section-number selfRef">3.3.1.3. </a><a href="#name-custom-fields" class="section-name selfRef">custom fields</a>
            </h5>
<p id="section-3.3.1.3-1">Tools can add optional custom metadata to the "configuration" field to store state
and make it easier to share specific data viewpoints and view configurations.<a href="#section-3.3.1.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1.3-2">An example from the <a href="https://qvis.edm.uhasselt.be">qvis toolset</a>'s congestion
graph follows. In this example, the congestion graph is zoomed in between 1s and
2s of the trace and the 124th event in the trace is selected.<a href="#section-3.3.1.3-2" class="pilcrow">¶</a></p>
<span id="name-custom-configuration-fields"></span><div id="qvis_config">
<figure id="figure-6">
              <div class="artwork art-text alignLeft" id="section-3.3.1.3-3.1">
<pre>
{
    "configuration" : {
        "time_offset": 100,
        "qvis" : {
            "congestiongraph": {
                "startX": 1000,
                "endX": 2000,
                "selectedEvent": 124
            }
        }
    }
}
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-custom-configuration-fields" class="selfRef">Custom configuration fields example</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="vantage-point">
<section id="section-3.3.2">
          <h4 id="name-vantage_point">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-vantage_point" class="section-name selfRef">vantage_point</a>
          </h4>
<p id="section-3.3.2-1">This field describes the vantage point from which the trace originates. Each trace
can have only a single vantage_point and thus all events in a trace MUST BE from
the perspective of this vantage_point. To include events from multiple
vantage_points, implementers can include multiple traces, split by vantage_point,
in a single qlog file.<a href="#section-3.3.2-1" class="pilcrow">¶</a></p>
<span id="name-vantagepoint-definition"></span><div id="vantage_point">
<figure id="figure-7">
            <div class="artwork art-text alignLeft art-json" id="section-3.3.2-2.1">
<pre>
Definition:
class VantagePoint {
    name?: string,
    type: VantagePointType,
    flow?: VantagePointType
}

class VantagePointType {
    server, // endpoint which initiates the connection.
    client, // endpoint which accepts the connection.
    network, // observer in between client and server.
    unknown
}

JSON examples:
{
    "name": "aioquic client",
    "type": "client",
}

{
    "name": "wireshark trace",
    "type": "network",
    "flow": "client"
}
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-vantagepoint-definition" class="selfRef">VantagePoint definition</a>
            </figcaption></figure>
</div>
<p id="section-3.3.2-3">The flow field is only required if type is "network" (for example, the trace is
generated from a packet capture). It is used to disambiguate events like
"packet sent" and "packet received". This is indicated explicitly because for
multiple reasons (e.g., privacy) data from which the flow direction can be
otherwise inferred (e.g., IP addresses) might not be present in the logs.<a href="#section-3.3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.3.2-4">Meaning of the different values for the flow field:
  * "client" indicates that this vantage point follows client data flow semantics (a
    "packet sent" event goes in the direction of the server).
  * "server" indicates that this vantage point follow server data flow semantics (a
    "packet sent" event goes in the direction of the client).
  * "unknown" indicates that the flow is unknown.<a href="#section-3.3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.3.2-5">Depending on the context, tools confronted with "unknown" values in the
vantage_point can either try to infer the semantics from protocol-level domain
knowledge (e.g., in QUIC, the client always sends the first packet) or give the
user the option to switch between client and server perspectives manually.<a href="#section-3.3.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="commonfields-and-eventfields">
<section id="section-3.3.3">
          <h4 id="name-common_fields-and-event_fie">
<a href="#section-3.3.3" class="section-number selfRef">3.3.3. </a><a href="#name-common_fields-and-event_fie" class="section-name selfRef">common_fields and event_fields</a>
          </h4>
<p id="section-3.3.3-1">To reduce file size and make logging easier, the trace schema lists the names of
the specific fields that are logged per-event up-front, instead of repeating the
field name with each value, as is common in traditiona JSON. This is done in the
"event_fields" list. This allows us to encode individual events as an array of
values, instead of an object. To reduce file size even further, common event
fields that have the same value for all events in this trace, are listed as
name-value pairs in "common_fields".<a href="#section-3.3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3.3-2">For example, when logging events for a single QUIC connection, all events will
share the same "original destination connection ID" (ODCID). This field and its
value should be set in "common_fields", rather than "event_fields". However, if a
single trace would contain events for multiple QUIC connections at the same time
(e.g., a single, big output log for a server), the ODCID can be different across
events, and should be part of "event_fields" instead (leading to it being logged
for each individual event).<a href="#section-3.3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3.3-3">Examples comparing traditional JSON vs the qlog format can be found in
<a href="#traditional_json" class="xref">Figure 8</a> and <a href="#qlog_json" class="xref">Figure 9</a>. The events described in these examples are
purely for illustration. Actual event type definitions for the QUIC and HTTP/3
protocols can be found in <span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span>.<a href="#section-3.3.3-3" class="pilcrow">¶</a></p>
<span id="name-traditional-json"></span><div id="traditional_json">
<figure id="figure-8">
            <div class="artwork art-text alignLeft art-json" id="section-3.3.3-4.1">
<pre>
{
    "events": [{
            "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",
            "ODCID": "127ecc830d98f9d54a42c4f0842aa87e181a",
            "protocol_type": "QUIC_HTTP3",
            "time": 1553986553574,
            "category": "transport",
            "event": "packet_received",
            "data": [...]
        },{
            "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",
            "ODCID": "127ecc830d98f9d54a42c4f0842aa87e181a",
            "protocol_type": "QUIC_HTTP3",
            "time": 1553986553579,
            "category": "http",
            "event": "frame_parsed",
            "data": [...]
        },
        ...
    ]
}
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-traditional-json" class="selfRef">Traditional JSON</a>
            </figcaption></figure>
</div>
<span id="name-qlog-optimized-json"></span><div id="qlog_json">
<figure id="figure-9">
            <div class="artwork art-text alignLeft art-json" id="section-3.3.3-5.1">
<pre>
{
    "common_fields": {
        "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",
        "ODCID": "127ecc830d98f9d54a42c4f0842aa87e181a",
        "protocol_type":  "QUIC_HTTP3",
        "reference_time": "1553986553572"
    },
    "event_fields": [
        "relative_time",
        "category",
        "event",
        "data"
    ],
    "events": [[
            2,
            "transport",
            "packet_received",
            [...]
        ],[
            7,
            "http",
            "frame_parsed",
            [...]
        ],
        ...
    ]
}
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-qlog-optimized-json" class="selfRef">qlog optimized JSON</a>
            </figcaption></figure>
</div>
<p id="section-3.3.3-6">The main field names that can be included in these fields are defined in
<a href="#field-name-semantics" class="xref">Section 3.4</a>.<a href="#section-3.3.3-6" class="pilcrow">¶</a></p>
<p id="section-3.3.3-7">Given that qlog is intended to be a flexible format, unknown field names in both
"common_fields" and "event_fields" MUST be disregarded by the user and tools
(i.e., the presence of an uknown field is explicitly NOT an error).<a href="#section-3.3.3-7" class="pilcrow">¶</a></p>
<p id="section-3.3.3-8">This approach makes line-per-line logging easier and faster, as each log statement
only needs to include the data for the events, not the field names. Events can
also be logged and processed separately, as part of a contiguous event-stream.<a href="#section-3.3.3-8" class="pilcrow">¶</a></p>
<div id="commonfields-format">
<section id="section-3.3.3.1">
            <h5 id="name-common_fields-format">
<a href="#section-3.3.3.1" class="section-number selfRef">3.3.3.1. </a><a href="#name-common_fields-format" class="section-name selfRef">common_fields format</a>
            </h5>
<p id="section-3.3.3.1-1">An object containing pairs of "field name"-"field value". Fields included in
"common_fields" indicate that these field values are the same for each event in
the "events" array.<a href="#section-3.3.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.3.3.1-2">If even one event in the trace does not adhere to this convention, that field name
should be in "event_fields" instead, and the value logged per event. An
alternative route is to include the most commonly seen value in "common_fields"
and then include the deviating field value in the generic "data" field for each
non-confirming event. However, these semantics are not defined in this document.<a href="#section-3.3.3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="eventfields-format">
<section id="section-3.3.3.2">
            <h5 id="name-event_fields-format">
<a href="#section-3.3.3.2" class="section-number selfRef">3.3.3.2. </a><a href="#name-event_fields-format" class="section-name selfRef">event_fields format</a>
            </h5>
<p id="section-3.3.3.2-1">An array of field names (plain strings). Field names included in "event_fields"
indicate that these field names are present <strong>in this exact order</strong> for each event
in the "events" array. Each individual event then only has to log the
corresponding values for those fields in the correct order.<a href="#section-3.3.3.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="field-name-semantics">
<section id="section-3.4">
        <h3 id="name-field-name-semantics">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-field-name-semantics" class="section-name selfRef">Field name semantics</a>
        </h3>
<p id="section-3.4-1">This section lists pre-defined, reserved field names with specific semantics and
expected corresponding value formats.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">Only one time-based field (see <a href="#time-based-fields" class="xref">Section 3.4.1</a>), the "event" field and the
"data" field are mandatory. Typical setups will log "reference_time",
"protocol_type" and "group_id" in "common_fields" and "relative_time", "category",
"event" and "data" in "event_fields".<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4-3">Other field names are allowed, both in "common_fields" and "event_fields", but
their semantics depend on the context of the log usage (e.g., for QUIC, the ODCID
field is used), see <span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span>.<a href="#section-3.4-3" class="pilcrow">¶</a></p>
<span id="name-event-fields-definition"></span><div id="event_fields">
<figure id="figure-10">
          <div class="artwork art-text alignLeft art-json" id="section-3.4-4.1">
<pre>
Definition:
 {
    protocol_type: string,
    group_id?:array&lt;string&gt;, // if in common_fields
    group_id?:string|uint32, // if per-event

    // at least one of these four fields must be present
    time?: double,
    reference_time?: double,
    relative_time?: double,
    delta_time?: double,

    category: string,
    event: string,
    data: any,

    // list of fields with any type
}

JSON example:
{
    "protocol_type":  "QUIC_HTTP3",
    "group_id": ["127ecc830d98f9d54a42c4f0842aa87e181a"],

    "time": 1553986553572,
    "reference_time": 1553986553572,
    "relative_time": 125,
    "delta_time": 5,

    "category": "transport",
    "event": "packet_sent",
    "data": { ... }

    "ODCID": "127ecc830d98f9d54a42c4f0842aa87e181a",
}
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-event-fields-definition" class="selfRef">Event fields definition</a>
          </figcaption></figure>
</div>
<div id="time-based-fields">
<section id="section-3.4.1">
          <h4 id="name-timestamps">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-timestamps" class="section-name selfRef">timestamps</a>
          </h4>
<p id="section-3.4.1-1">There are three main modes for logging time:<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4.1-2.1">Include the full timestamp with each event ("time"). This approach uses the
largest amount of characters.<a href="#section-3.4.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.4.1-2.2">Delta-encode each time value on the previously logged value ("delta_time").
The first event can log the full timestamp. This approach uses the least amount
of characters.<a href="#section-3.4.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.4.1-2.3">Specify a full "reference_time" timestamp up-front in "common_fields" and
include only relatively-encoded values based on this reference_time with each
event ("relative_time"). This approach uses a medium amount of characters. The
"reference_time" is in ms since the Unix epoch.<a href="#section-3.4.1-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-3.4.1-3">The first option is good for stateless loggers, the second and third for stateful
loggers. The third option is generally preferred, since it produces smaller files
while being easier to reason about.<a href="#section-3.4.1-3" class="pilcrow">¶</a></p>
<span id="name-three-different-approaches-"></span><div id="time_approaches">
<figure id="figure-11">
            <div class="artwork art-text alignLeft" id="section-3.4.1-4.1">
<pre>
The time approach will use:
1500, 1505, 1522, 1588

The delta_time approach will use:
1500, 5, 17, 66

The relative_time approach will:
- set the reference_time to 1500 in "common_fields"
- use: 0, 5, 22, 88

</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-three-different-approaches-" class="selfRef">Three different approaches for logging timestamps</a>
            </figcaption></figure>
</div>
<p id="section-3.4.1-5">One of these options should be chosen for the entire trace. Each event MUST
include a timestamp.<a href="#section-3.4.1-5" class="pilcrow">¶</a></p>
<p id="section-3.4.1-6">Events in each individual trace SHOULD be logged in strictly ascending timestamp
order (though not necessarily absolute value, for the "delta_time" setup). Tools
CAN sort all events on the timestamp before processing them, though are not
required to (as this could impose a significant processing overhead).<a href="#section-3.4.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="group_ids">
<section id="section-3.4.2">
          <h4 id="name-group_id">
<a href="#section-3.4.2" class="section-number selfRef">3.4.2. </a><a href="#name-group_id" class="section-name selfRef">group_id</a>
          </h4>
<p id="section-3.4.2-1">A single Trace can contain events from a variety of sources, belonging to for
example a number of individual QUIC connections. For tooling considerations, it is
necessary to have a well-defined way to split up events belonging to different
logical groups into subgroups for visualization and processing. For example, if
one type of log uses 4-tuples as identifiers and uses a field name "four_tuple"
and another uses "ODCID", there is no way to know for generic tools which of these
fields should be used to create subgroups. As such, qlog uses the generic
"group_id" field to circumvent this issue.<a href="#section-3.4.2-1" class="pilcrow">¶</a></p>
<p id="section-3.4.2-2">The "group_id" field is always an array of strings. For more complex use cases, in
which the the group_id's internally are complex objects with several fields (e.g.,
a 4-tuple per group), this complex value should be serialized. In those
cases, it would be wasteful to log these values in full every single time. This
would also complicate tool-based processing.<a href="#section-3.4.2-2" class="pilcrow">¶</a></p>
<p id="section-3.4.2-3">qlog typically expects to find the "group_id" field in both "common_fields" and
"event_fields" <strong>at the same time</strong> (where normally, a field is only allowed in
one of both). In this case, the per-event value of the "group_id" field represents
an index in to the group_id array in "common_fields". This is useful if the
group_ids are known up-front or the qlog trace can be generated from a more
verbose format afterwards. If this is not the case however, it is acceptable to
just log the full serialized group_id for each event and to not include "group_id"
in "common_fields". Both use cases are demonstrated in <a href="#group_id_repeated" class="xref">Figure 12</a> and
<a href="#group_id_indexed" class="xref">Figure 13</a>. The final option is not to include the "group_id" int each
event but rather have a "group_id" array with a single entry in "common_fields".
This is useful when all events in a trace belong to the same group, but you still
want to keep track of the group_id explicitly.<a href="#section-3.4.2-3" class="pilcrow">¶</a></p>
<p id="section-3.4.2-4">Since "group_id" is a generic name, it conveys little of the semantics to the
casual reader. It is best practice to also include a per use case additional field
to the "common_fields" with a semantic name, that has the same value as the
"group_id" field. For example, see the "ODCID" field in <a href="#qlog_json" class="xref">Figure 9</a> and the
"four_tuples" field in <a href="#group_id_indexed" class="xref">Figure 13</a>.<a href="#section-3.4.2-4" class="pilcrow">¶</a></p>
<span id="name-repeated-complex-group_id"></span><div id="group_id_repeated">
<figure id="figure-12">
            <div class="artwork art-text alignLeft art-json" id="section-3.4.2-5.1">
<pre>
{
    "common_fields": {
        "protocol_type":  "QUIC_HTTP3",
    },
    "event_fields": [
        "time",
        "group_id",
        "category",
        "event",
        "data"
    ],
    "events": [[
            1553986553579,
            "ip1=2001:67c:1232:144:9498:6df6:f450:110b,ip2=2001:67c:2b0:1c1::198,port1=59105,port2=80"
            "transport",
            "packet_received",
            [...]
        ],[
            1553986553588,
            "ip1=10.0.6.137,ip2=52.58.13.57,port1=56522,port2=443"
            "http",
            "frame_parsed",
            [...]
        ],[
            1553986553598,
            "ip1=2001:67c:1232:144:9498:6df6:f450:110b,ip2=2001:67c:2b0:1c1::198,port1=59105,port2=80"
            "transport",
            "packet_sent",
            [...]
        ],
        ...
    ]
}
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-repeated-complex-group_id" class="selfRef">Repeated complex group_id</a>
            </figcaption></figure>
</div>
<span id="name-indexed-complex-group_id"></span><div id="group_id_indexed">
<figure id="figure-13">
            <div class="artwork art-text alignLeft art-json" id="section-3.4.2-6.1">
<pre>
{
    "common_fields": {
        "protocol_type":  "QUIC_HTTP3",
        "group_id": [
            "ip1=2001:67c:1232:144:9498:6df6:f450:110b,ip2=2001:67c:2b0:1c1::198,port1=59105,port2=80"
            "ip1=10.0.6.137,ip2=52.58.13.57,port1=56522,port2=443"
        ],
        "four_tuples": [
            "ip1=2001:67c:1232:144:9498:6df6:f450:110b,ip2=2001:67c:2b0:1c1::198,port1=59105,port2=80"
            "ip1=10.0.6.137,ip2=52.58.13.57,port1=56522,port2=443"
        ]
    },
    "event_fields": [
        "time",
        "group_id",
        "category",
        "event",
        "data"
    ],
    "events": [[
            1553986553579,
            0,
            "transport",
            "packet_received",
            [...]
        ],[
            1553986553588,
            1,
            "http",
            "frame_parsed",
            [...]
        ],[
            1553986553598,
            0,
            "transport",
            "packet_sent",
            [...]
        ],
        ...
    ]
}
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-indexed-complex-group_id" class="selfRef">Indexed complex group_id</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="category-and-event">
<section id="section-3.4.3">
          <h4 id="name-category-and-event">
<a href="#section-3.4.3" class="section-number selfRef">3.4.3. </a><a href="#name-category-and-event" class="section-name selfRef">category and event</a>
          </h4>
<p id="section-3.4.3-1">Category allows a higher-level grouping of events per specific event type.<a href="#section-3.4.3-1" class="pilcrow">¶</a></p>
<p id="section-3.4.3-2">For example, instead of having an event of value "transport_packet_sent", we
instead have a category of "transport" and event type of "packet_sent". This
allows for fast and high-level filtering based on category and re-use of event
across categories.<a href="#section-3.4.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="data">
<section id="section-3.4.4">
          <h4 id="name-data">
<a href="#section-3.4.4" class="section-number selfRef">3.4.4. </a><a href="#name-data" class="section-name selfRef">data</a>
          </h4>
<p id="section-3.4.4-1">The data field is a generic object. It contains the per-event metadata and its
form and semantics are defined per specific sort of event (typically per event,
but possibly also by combination of category and event). For example data field
value definitons for QUIC and HTTP/3, see <span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span>.<a href="#section-3.4.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="custom-fields-1">
<section id="section-3.4.5">
          <h4 id="name-custom-fields-2">
<a href="#section-3.4.5" class="section-number selfRef">3.4.5. </a><a href="#name-custom-fields-2" class="section-name selfRef">custom Fields</a>
          </h4>
<p id="section-3.4.5-1">Note that qlog files can always contain custom fields (e.g., a per-event field
indicating its privacy properties or path_id in multipath protocols) and assign
custom values to existing fields (e.g., new categories for implemenation-specific
events). Loggers are free to add such fields and field values and tools MUST
either ignore these unknown fields or show them in a generic fashion.<a href="#section-3.4.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="event-field-values">
<section id="section-3.4.6">
          <h4 id="name-event-field-values">
<a href="#section-3.4.6" class="section-number selfRef">3.4.6. </a><a href="#name-event-field-values" class="section-name selfRef">event field values</a>
          </h4>
<p id="section-3.4.6-1">The specific values for each of these fields and their semantics are defined in
separate documents, specific per protocol or use case.<a href="#section-3.4.6-1" class="pilcrow">¶</a></p>
<p id="section-3.4.6-2">For example: event definitions for QUIC and HTTP/3 can be found in
<span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span>.<a href="#section-3.4.6-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="triggers">
<section id="section-3.5">
        <h3 id="name-triggers">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-triggers" class="section-name selfRef">Triggers</a>
        </h3>
<p id="section-3.5-1">Sometimes, additional information is needed in the case where a single event can
be caused by a variety of other events. In the normal case, the context of the
surrounding log messages gives a hint as to which of these other events was the
cause. However, in highly-parallel and optimized implementations, corresponding
log messages might be wide and far between in time. Another option is to use
triggers instead of logging extra full events to get more fine-grained information
without much additional overhead.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">For this reason, qlog allows an optional "trigger" property on the value of the
"data" field to convey such information. It indicates the reason this event
occured. The possible reasons depend on the type of event and SHOULD be specified
next to each event definition. Triggers are always strings, though specific
protocols can add additional fields with more metadata on the triggering
conditions.<a href="#section-3.5-2" class="pilcrow">¶</a></p>
<span id="name-trigger-example"></span><div id="trigger_example">
<figure id="figure-14">
          <div class="artwork art-text alignLeft art-json" id="section-3.5-3.1">
<pre>
{
    "common_fields": {
        "group_id": "127ecc830d98f9d54a42c4f0842aa87e181a",
        "ODCID": "127ecc830d98f9d54a42c4f0842aa87e181a",
        "protocol_type":  "QUIC_HTTP3",
        "reference_time": 1553986553572
    },
    "event_fields": [
        "relative_time",
        "category",
        "event",
        "data"
    ],
    "events": [[
            20,
            "transport",
            "packet_dropped",
            {
                // Indicates that the packet has been dropped because
                // there were no appropriate TLS keys available to decrypt
                // it at this time.
                "trigger": "keys_unavailable",
                ...
            }
        ],[
            27,
            "transport",
            "packet_sent",
            {
                // Indicates that this packet was sent as a probe after a timeout occurred
                "trigger": "pto_probe",
                ...
            }
        ],
        ...
    ]
}
</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-trigger-example" class="selfRef">Trigger example</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="tooling-requirements">
<section id="section-4">
      <h2 id="name-tooling-requirements">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-tooling-requirements" class="section-name selfRef">Tooling requirements</a>
      </h2>
<p id="section-4-1">Tools MUST indicate which qlog version(s) they support. Additionally, they SHOULD
indicate exactly which values for and properties of the category, event and data
fields they look for to execute their logic. Tools SHOULD perform a (high-level)
check if an input qlog file adheres to the expected qlog schema. If a tool
determines a qlog file does not contain enough supported information to correctly
execute the tool's logic, it SHOULD generate a clear error message to this effect.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">Tools MUST NOT produce errors for any field names and values in the qlog format
that they do not recognize. Tools CAN indicate unknown event occurences within
their context (e.g., marking unknown events on a timeline for manual
interpretation by the user).<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">Tool authors should be aware that, depending on the logging implementation, some
events will not always be present in all traces. For example, using a circular
logging buffer of a fixed size, it could be that the earliest events (e.g.,
connection setup events) are later overwritten by "newer" events. Tool authors are
encouraged to take this setup into account and to make their tools robust enough
to still provide adequate output for incomplete logs. Loggers using a circular
buffer are in turn reminded of the requirement of listing events in strict time
order, as per <a href="#time-based-fields" class="xref">Section 3.4.1</a>.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">Most JSON parsers strictly follow the JSON specification. This includes the rule
that trailing comma's are not allowed. As it is frequently annoying to remove
these trailing comma's when logging events in a streaming fashion, tool
implementers SHOULD allow the last event entry of a qlog trace to be an empty
array. This allows loggers to simply close the qlog file by appending "[]]}]}"
after their last streamed event.<a href="#section-4-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="methods-of-access-and-generation">
<section id="section-5">
      <h2 id="name-methods-of-access-and-gener">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-methods-of-access-and-gener" class="section-name selfRef">Methods of Access and Generation</a>
      </h2>
<p id="section-5-1">This section describes some default ways to access and trigger generation of qlog
files.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="via-a-well-known-endpoint">
<section id="section-5.1">
        <h3 id="name-via-a-well-known-endpoint">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-via-a-well-known-endpoint" class="section-name selfRef">via a well-known endpoint</a>
        </h3>
<p id="section-5.1-1">qlog implementers MAY make generated logs and traces on an endpoint (typically the
server) available via the following .well-known URI:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.1-2.1">.well-known/qlog/IDENTIFIER<a href="#section-5.1-2.1" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.1-3">The IDENTIFIER variable depends on the setup and the chosen protocol. For example,
for QUIC logging, the ODCID is often used to uniquely identify a connection.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">Implementers SHOULD allow users to fetch logs for a given connection on a 2nd,
separate connection. This helps prevent pollution of the logs by fetching them
over the same connection that one wishes to observe through the log. Ideally, for
the QUIC use case, the logs should also be approachable via an HTTP/2 or HTTP/1.1
endpoint, to aid debugging.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1-5">qlog implementers SHOULD NOT enable this .well-known endpoint in typical
production settings to prevent (malicious) users from downloading logs from other
connections. Implementers are advised to disable this endpoint by default and
require specific actions from the end users to enable it (and potentially qlog
itself).<a href="#section-5.1-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="notes-on-practical-use">
<section id="section-6">
      <h2 id="name-notes-on-practical-use">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-notes-on-practical-use" class="section-name selfRef">Notes on Practical Use</a>
      </h2>
<p id="section-6-1">Note that, even with the optimizations detailed above, it is to be expected that
qlog files (as they are JSON) will be relatively large when compared to binary
formats. If this turns out to be an issue in a real deployment, it is a perfectly
acceptable practices to first generate the initial application-side logs in
another (custom) (binary) format. Afterwards, those bespoke files can then be
transformed into the qlog format for improved interoperability with tools and
other logs. A prime example of this is converting of binary .pcap packet capture
files (e.g., obtained from wireshark or tcpdump) to the qlog format. <a href="https://github.com/quiclog/pcap2qlog">Such a
conversion tool is available for the QUIC and HTTP/3
protocols</a>.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="concrete-formats">
<section id="section-7">
      <h2 id="name-guidance-on-exporting-qlog-">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-guidance-on-exporting-qlog-" class="section-name selfRef">Guidance on Exporting qlog to a Concrete Format</a>
      </h2>
<p id="section-7-1">This document and other related qlog schema definitions are intentionally
format-agnostic. This means that implementers themselves can choose how to
represent and serialize qlog data practically on disk or on the wire. Some
examples of possible formats are JSON, CBOR, CSV, protocol buffers, flatbuffers,
etc. All these formats make certain tradeoffs between flexibility and efficiency,
with textual formats like JSON typically being more flexible than binary formats
like protocol buffers. The format choice will depend on the practical use case of
the qlog user. For example, for use in day to day debugging, a plaintext readable
(yet relatively large) format like JSON is probably preferred. However, for use in
production, a more optimized yet restricted format can be better. In this latter
case, it will be more difficult to achieve interoperability between qlog
implementations of various protocol stacks, as some custom or tweaked events from
one might not be compatible with the format of the other. This will also reflect
in tooling: not all tools will support all formats.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">This being said, the authors prefer JSON as the basis for storing qlog, as it
retains full flexibility and maximum interoperability. For this reason, this
section details how to practically transform qlog schema definitions to JSON. We
also discuss options to bring down JSON size and processing overheads in
<a href="#optimizations" class="xref">Section 7.2</a>, which has made the JSON-based approach quite usable in many
practical situations.<a href="#section-7-2" class="pilcrow">¶</a></p>
<div id="qlog-to-json-mapping">
<section id="section-7.1">
        <h3 id="name-qlog-to-json-mapping">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-qlog-to-json-mapping" class="section-name selfRef">qlog to JSON mapping</a>
        </h3>
<p id="section-7.1-1">To facilitate this mapping, the qlog document employ a format that is close to
pure JSON for its examples and data definitions. Still, as JSON is not a typed
format, there are some peculiarities to observe.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<div id="numbers">
<section id="section-7.1.1">
          <h4 id="name-numbers">
<a href="#section-7.1.1" class="section-number selfRef">7.1.1. </a><a href="#name-numbers" class="section-name selfRef">Numbers</a>
          </h4>
<p id="section-7.1.1-1">While JSON has built-in support for both strings and numbers up to 64 bits in
size, not all JSON parsers do. For example, none of the major Web browsers support
full 64-bit numbers at this time. Instead, all numbers are internally represented
as floating point values, with a maximum value of 2^53-1. Numbers larger than that
are either truncated or produce a JSON parsing error. While this is expected to
improve in the future (as "BigInt" support has been introduced in most Browsers),
we still need to deal with it here.<a href="#section-7.1.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1.1-2">When transforming an int64, uint64 or double from qlog to JSON, the implementer
can thus choose to either log them as JSON numbers (taking the risk) or to log
them as strings instead. Logging as strings should however only be practically
needed if the value is likely to exceed 2^53-1. In practice, even though protocols
such as QUIC allow 64-bit values for for example stream identifiers, these high
numbers are unlikely to be reached for the overwhelming majority of cases. As
such, it is probably a valid trade-off to take the risk and log 64-bit values as
JSON numbers instead of strings.<a href="#section-7.1.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1.1-3">Tools processing JSON-based qlog SHOULD be able to deal with 64-bit fields being
serialized as either strings or numbers.<a href="#section-7.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="bytes">
<section id="section-7.1.2">
          <h4 id="name-bytes">
<a href="#section-7.1.2" class="section-number selfRef">7.1.2. </a><a href="#name-bytes" class="section-name selfRef">Bytes</a>
          </h4>
<p id="section-7.1.2-1">Unlike most binary formats, JSON does not allow the logging of raw binary blobs
directly. As such, when serializing a byte or array&lt;byte&gt;, a scheme needs to
be chosen.<a href="#section-7.1.2-1" class="pilcrow">¶</a></p>
<p id="section-7.1.2-2">To represent qlog bytes in JSON, they MUST be serialized to their lowercase
hexadecimal format (with 0 prefix for values lower than 10). All values are
directly appended to each other, without delimiters. The full value is not
prefixed with 0x (as is sometimes common).<a href="#section-7.1.2-2" class="pilcrow">¶</a></p>
<span id="name-example-for-serializing-byt"></span><div id="bytes_example">
<figure id="figure-15">
            <div class="artwork art-text alignLeft art-json" id="section-7.1.2-3.1">
<pre>
For the five raw unsigned byte input values of: 5 20 40 171 255, the JSON serialization is:

{
    "raw": "051428abff"
}
</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-example-for-serializing-byt" class="selfRef">Example for serializing bytes</a>
            </figcaption></figure>
</div>
<p id="section-7.1.2-4">As such, the resulting string will always have an even amount of characters and
the original byte-size can be retrieved by dividing the string length by 2.<a href="#section-7.1.2-4" class="pilcrow">¶</a></p>
<div id="truncated-values">
<section id="section-7.1.2.1">
            <h5 id="name-truncated-values">
<a href="#section-7.1.2.1" class="section-number selfRef">7.1.2.1. </a><a href="#name-truncated-values" class="section-name selfRef">Truncated Values</a>
            </h5>
<p id="section-7.1.2.1-1">In some cases, it can be interesting not to log a full raw blob but instead a
truncated value (for example, only the first 100 bytes of an HTTP response body to
be able to discern which file it actually contained). In these cases, the original
byte-size length cannot be obtained from the serialized value directly. As such,
all qlog schema definitions SHOULD include a separate, length-indicating field for
all fields of type array&lt;byte&gt; they specify. This allows always retrieving
the original length, but also allows the omission of any raw value bytes of the
field completely (e.g., out of privacy or security considerations).<a href="#section-7.1.2.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1.2.1-2">To reduce overhead however and in the case the full raw value is logged, the extra
length-indicating field can be left out. As such, tools MUST be able to deal with
this situation and derive the length of the field from the raw value if no
separate length-indicating field is present.<a href="#section-7.1.2.1-2" class="pilcrow">¶</a></p>
<span id="name-example-for-serializing-tru"></span><div id="bytes_example_two">
<figure id="figure-16">
              <div class="artwork art-text alignLeft art-json" id="section-7.1.2.1-3.1">
<pre>
// both the full raw value and its length are present (length is redundant)
{
    "raw_length": 5,
    "raw": "051428abff"
}

// only the raw value is present, indicating it represents the fields full value
{
    "raw": "051428abff"
}

// only the length field is present, meaning the value was omitted
{
    "raw_length": 5,
}

// both fields are present and the lengths do not match: the value was truncated to the first three bytes.
{
    "raw_length": 5,
    "raw": "051428"
}

</pre>
</div>
<figcaption><a href="#figure-16" class="selfRef">Figure 16</a>:
<a href="#name-example-for-serializing-tru" class="selfRef">Example for serializing truncated bytes</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="summarizing-table">
<section id="section-7.1.3">
          <h4 id="name-summarizing-table">
<a href="#section-7.1.3" class="section-number selfRef">7.1.3. </a><a href="#name-summarizing-table" class="section-name selfRef">Summarizing table</a>
          </h4>
<p id="section-7.1.3-1">JSON strings are serialized with quotes. Numbers without.<a href="#section-7.1.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
            <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">qlog type</th>
                <th class="text-left" rowspan="1" colspan="1">JSON type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">int8</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">int16</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">int32</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uint8</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uint16</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uint32</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">float</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">int64</td>
                <td class="text-left" rowspan="1" colspan="1">number or string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uint64</td>
                <td class="text-left" rowspan="1" colspan="1">number or string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">double</td>
                <td class="text-left" rowspan="1" colspan="1">number or string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">bytes</td>
                <td class="text-left" rowspan="1" colspan="1">string (lowercase hex value)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">string</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">boolean</td>
                <td class="text-left" rowspan="1" colspan="1">string ("true" or "false")</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">enum</td>
                <td class="text-left" rowspan="1" colspan="1">string (full value/name, not index)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">any</td>
                <td class="text-left" rowspan="1" colspan="1">object  ( {...} )</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">array</td>
                <td class="text-left" rowspan="1" colspan="1">array   ( [...] )</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
</section>
</div>
<div id="optimizations">
<section id="section-7.2">
        <h3 id="name-optimization-options">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-optimization-options" class="section-name selfRef">Optimization options</a>
        </h3>
<p id="section-7.2-1">Besides moving to a stricter, binary format (such as protocol buffers), there are
various options to reduce the size of a JSON-based qlog format. As we as authors
believe JSON is the format best suited for qlog, we also formalize a few of these
optimization options here. Tools SHOULD support these if they intend to be useful
across protocol stacks.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">TODO: common_fields as expected, default, no-brainer optimization
TODO: cbor and compression as recommended optimizations
TODO: event_fields as potential optimization
TODO: dictionary-based as potential optimization
TODO: protobuf or other binary format as potential optimization with flexibility caveat<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<p id="section-7.2-3">TODO: link to discussion + reproduce results table here (first get resutls for the
non-event-field version of qlog though)<a href="#section-7.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-8">
      <h2 id="name-security-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1">TODO : discuss privacy and security considerations (e.g., what NOT to log, what to
strip out of a log before sharing, ...)<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">TODO: primarily the .well-known URI<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-normative-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="QLOG-QUIC-HTTP3">[QLOG-QUIC-HTTP3]</dt>
      <dd>
<span class="refAuthor">Marx, R., Ed.</span>, <span class="refTitle">"QUIC and HTTP/3 event definitions for qlog"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-marx-qlog-event-definitions-quic-h3-01</span>, <time datetime="2019-10-14" class="refDate">14 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-marx-qlog-event-definitions-quic-h3-01">https://tools.ietf.org/html/draft-marx-qlog-event-definitions-quic-h3-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
    <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="change-log">
<section id="section-appendix.a">
      <h2 id="name-change-log">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<div id="since-draft-marx-qlog-main-schema-01">
<section id="section-a.1">
        <h2 id="name-since-draft-marx-qlog-main-">
<a href="#section-a.1" class="section-number selfRef">A.1. </a><a href="#name-since-draft-marx-qlog-main-" class="section-name selfRef">Since draft-marx-qlog-main-schema-01:</a>
        </h2>
<ul class="normal">
<li class="normal" id="section-a.1-1.1">
            <p id="section-a.1-1.1.1">Decoupled qlog from the JSON format and described a mapping instead (#89)<a href="#section-a.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-a.1-1.1.2.1">Data types are now specified in this document and proper definitions for
fields were added in this format<a href="#section-a.1-1.1.2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-a.1-1.1.2.2">64-bit numbers can now be either strings or numbers, with a preference for
numbers (#10)<a href="#section-a.1-1.1.2.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-a.1-1.1.2.3">binary blobs are now logged as lowercase hex strings (#39, #36)<a href="#section-a.1-1.1.2.3" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-a.1-1.1.2.4">added guidance to add length-specifiers for binary blobs (#102)<a href="#section-a.1-1.1.2.4" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-a.1-1.2">Removed "time_units" from Configuration. All times are now in ms instead (#95)<a href="#section-a.1-1.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-marx-qlog-main-schema-00">
<section id="section-a.2">
        <h2 id="name-since-draft-marx-qlog-main-s">
<a href="#section-a.2" class="section-number selfRef">A.2. </a><a href="#name-since-draft-marx-qlog-main-s" class="section-name selfRef">Since draft-marx-qlog-main-schema-00:</a>
        </h2>
<ul class="normal">
<li class="normal" id="section-a.2-1.1">All field names are now lowercase (e.g., category instead of CATEGORY)<a href="#section-a.2-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-a.2-1.2">Triggers are now properties on the "data" field value, instead of separate field
types (#23)<a href="#section-a.2-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-a.2-1.3">group_ids in common_fields is now just also group_id<a href="#section-a.2-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="design-variations">
<section id="section-appendix.b">
      <h2 id="name-design-variations">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-design-variations" class="section-name selfRef">Design Variations</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-appendix.b-1.1">
          <a href="https://github.com/google/quic-trace">Quic-trace</a> takes a slightly different
approach based on protocolbuffers.<a href="#section-appendix.b-1.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-appendix.b-1.2">
          <a href="https://github.com/EricssonResearch/spindump">Spindump</a> also defines a custom
text-based format for in-network measurements<a href="#section-appendix.b-1.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-appendix.b-1.3">
          <a href="https://www.wireshark.org/">Wireshark</a> also has a QUIC dissector and its
results can be transformed into a json output format using tshark.<a href="#section-appendix.b-1.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-appendix.b-2">The idea is that qlog is able to encompass the use cases for both of these
alternate designs and that all tooling converges on the qlog standard.<a href="#section-appendix.b-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="section-appendix.c">
      <h2 id="name-acknowledgements">
<a href="#section-appendix.c" class="section-number selfRef">Appendix C. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-appendix.c-1">Thanks to Jana Iyengar, Brian Trammell, Dmitri Tikhonov, Stephen Petrides, Jari
Arkko, Marcus Ihlar, Victor Vasiliev, Mirja Kuehlewind, Jeremy Laine and Lucas
Pardue for their feedback and suggestions.<a href="#section-appendix.c-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.d">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Robin Marx</span></div>
<div dir="auto" class="left"><span class="org">Hasselt University</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:robin.marx@uhasselt.be" class="email">robin.marx@uhasselt.be</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
