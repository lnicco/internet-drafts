<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Main logging schema for qlog</title>
<meta content="Robin Marx" name="author">
<meta content="
       This document describes a high-level schema for a standardized logging format
called qlog.  This format allows easy sharing of data and the creation of reusable
visualization and debugging tools. The high-level schema in this document is
intended to be protocol-agnostic. Separate documents specify how the format should
be used for specific protocol data. The schema is also format-agnostic, and can be
represented in for example JSON, csv or protobuf. 
    " name="description">
<meta content="xml2rfc 2.47.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-marx-qlog-main-schema-latest" name="ietf.draft">
<link href="draft-marx-qlog-main-schema.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@import url('https://martinthomson.github.io/i-d-template/fonts.css');

html {
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --small-font-size: 14.5px;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
#title {
  padding: 1em 0 0.2em;
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1, h2, h3 {
  font-size: 22px;
  line-height: 26px;
}
h4, h5, h6 {
  font-size: 18px;
  line-height: 22px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p, #abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 18px;
  line-height: 24px;
}
p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
dd.break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px 'Oxygen Mono', monospace;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  pre {
    display: inline-block;
    overflow-x: auto;
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  pre + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
  table {
    display: inline-block;
    overflow-x: auto;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
tr:nth-child(2n) > td {
  background-color: var(--background-color);
}
tr:nth-child(2n+1) > td {
  background-color: var(--highlight-color);
}
thead+tbody > tr:nth-child(2n) > td {
  background-color: var(--highlight-color);
}
thead+tbody > tr:nth-child(2n+1) > td {
  background-color: var(--background-color);
}
table caption {
  margin: 0;
  padding: 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  visibility: hidden;
  user-select: none;
}
a.pilcrow[href] { color: #ddd; }
a.pilcrow[href]:hover { text-decoration: none; }
@media screen {
  :hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 8em;
}
#identifiers dt {
  width: var(--identifier-width);
  margin: 0;
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0 0 0 calc(1em + var(--identifier-width));
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 500px) {
  .index ul {
    column-count: 2;
    column-gap: 20px;
  }
  .index ul ul {
    column-count: 1;
    column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul p, #toc ul li {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table .text-left, table .text-left {
  text-align: left;
}
table .text-center, table .text-center {
  text-align: center;
}
table .text-right, table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Main logging schema for qlog</td>
<td class="right">September 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Marx</td>
<td class="center">Expires 5 March 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">QUIC</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-marx-qlog-main-schema-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-09-01" class="published">1 September 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-03-05">5 March 2021</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Marx</div>
<div class="org">Hasselt University</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Main logging schema for qlog</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes a high-level schema for a standardized logging format
called qlog.  This format allows easy sharing of data and the creation of reusable
visualization and debugging tools. The high-level schema in this document is
intended to be protocol-agnostic. Separate documents specify how the format should
be used for specific protocol data. The schema is also format-agnostic, and can be
represented in for example JSON, csv or protobuf.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 5 March 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-notational-conventions" class="xref">Notational Conventions</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-design-goals" class="xref">Design goals</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-the-high-level-qlog-schema" class="xref">The high level qlog schema</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-summary" class="xref">summary</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-traces" class="xref">traces</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-individual-trace-containers" class="xref">Individual Trace containers</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="xref">3.3.1</a>.  <a href="#name-configuration" class="xref">configuration</a><a href="#section-toc.1-1.3.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="xref">3.3.2</a>.  <a href="#name-vantage_point" class="xref">vantage_point</a><a href="#section-toc.1-1.3.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-field-name-semantics" class="xref">Field name semantics</a><a href="#section-toc.1-1.3.2.4.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="xref">3.4.1</a>.  <a href="#name-timestamps" class="xref">timestamps</a><a href="#section-toc.1-1.3.2.4.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4.2.2">
                    <p id="section-toc.1-1.3.2.4.2.2.1"><a href="#section-3.4.2" class="xref">3.4.2</a>.  <a href="#name-category-and-event" class="xref">category and event</a><a href="#section-toc.1-1.3.2.4.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4.2.3">
                    <p id="section-toc.1-1.3.2.4.2.3.1"><a href="#section-3.4.3" class="xref">3.4.3</a>.  <a href="#name-data" class="xref">data</a><a href="#section-toc.1-1.3.2.4.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4.2.4">
                    <p id="section-toc.1-1.3.2.4.2.4.1"><a href="#section-3.4.4" class="xref">3.4.4</a>.  <a href="#name-protocol_type" class="xref">protocol_type</a><a href="#section-toc.1-1.3.2.4.2.4.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4.2.5">
                    <p id="section-toc.1-1.3.2.4.2.5.1"><a href="#section-3.4.5" class="xref">3.4.5</a>.  <a href="#name-custom-fields-2" class="xref">custom fields</a><a href="#section-toc.1-1.3.2.4.2.5.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4.2.6">
                    <p id="section-toc.1-1.3.2.4.2.6.1"><a href="#section-3.4.6" class="xref">3.4.6</a>.  <a href="#name-triggers" class="xref">triggers</a><a href="#section-toc.1-1.3.2.4.2.6.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4.2.7">
                    <p id="section-toc.1-1.3.2.4.2.7.1"><a href="#section-3.4.7" class="xref">3.4.7</a>.  <a href="#name-group_id" class="xref">group_id</a><a href="#section-toc.1-1.3.2.4.2.7.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4.2.8">
                    <p id="section-toc.1-1.3.2.4.2.8.1"><a href="#section-3.4.8" class="xref">3.4.8</a>.  <a href="#name-common_fields" class="xref">common_fields</a><a href="#section-toc.1-1.3.2.4.2.8.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-serializing-qlog" class="xref">Serializing qlog</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-qlog-to-json-mapping" class="xref">qlog to JSON mapping</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="xref">4.1.1</a>.  <a href="#name-numbers" class="xref">numbers</a><a href="#section-toc.1-1.4.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="xref">4.1.2</a>.  <a href="#name-bytes" class="xref">bytes</a><a href="#section-toc.1-1.4.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.1.2.3">
                    <p id="section-toc.1-1.4.2.1.2.3.1"><a href="#section-4.1.3" class="xref">4.1.3</a>.  <a href="#name-summarizing-table" class="xref">Summarizing table</a><a href="#section-toc.1-1.4.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.1.2.4">
                    <p id="section-toc.1-1.4.2.1.2.4.1"><a href="#section-4.1.4" class="xref">4.1.4</a>.  <a href="#name-other-json-specifics" class="xref">Other JSON specifics</a><a href="#section-toc.1-1.4.2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-qlog-to-ndjson-mapping" class="xref">qlog to NDJSON mapping</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="xref">4.2.1</a>.  <a href="#name-supporting-ndjson-in-toolin" class="xref">Supporting NDJSON in tooling</a><a href="#section-toc.1-1.4.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-optimization-options" class="xref">Optimization options</a><a href="#section-toc.1-1.4.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-conversion-between-formats" class="xref">Conversion between formats</a><a href="#section-toc.1-1.4.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-methods-of-access-and-gener" class="xref">Methods of access and generation</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-set-destination-via-an-envi" class="xref">Set destination via an environment variable</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-access-logs-via-a-well-know" class="xref">Access logs via a well-known endpoint</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-tooling-requirements" class="xref">Tooling requirements</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-and-privacy-consid" class="xref">Security and privacy considerations</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.9.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.9.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-change-log" class="xref">Change Log</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-a.1" class="xref">A.1</a>.  <a href="#name-since-draft-marx-qlog-main-" class="xref">Since draft-marx-qlog-main-schema-01:</a><a href="#section-toc.1-1.10.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-a.2" class="xref">A.2</a>.  <a href="#name-since-draft-marx-qlog-main-s" class="xref">Since draft-marx-qlog-main-schema-00:</a><a href="#section-toc.1-1.10.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-design-variations" class="xref">Design Variations</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-appendix.c" class="xref">Appendix C</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-appendix.d" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a><a href="#section-toc.1-1.13.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">There is currently a lack of an easily usable, standardized endpoint logging
format. Especially for the use case of debugging and evaluating modern Web
protocols and their performance, it is often difficult to obtain structured logs
that provide adequate information for tasks like problem root cause analysis.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This document aims to provide a high-level schema and harness that describes the
general layout of an easily usable, shareable, aggregatable and structured logging
format. This high-level schema is protocol agnostic, with logging entries for
specific protocols and use cases being defined in other documents (see for example
<span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span> for QUIC and HTTP/3-related event definitions).<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">The goal of this high-level schema is to provide amenities and default
characteristics that each logging file should contain (or should be able to
contain), such that generic and reusable toolsets can be created that can deal
with logs from a variety of different protocols and use cases.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">As such, this document contains concepts such as versioning, metadata inclusion,
log aggregation, event grouping and log file size reduction techniques.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">Feedback and discussion welcome at
<a href="https://github.com/quiclog/internet-drafts">https://github.com/quiclog/internet-drafts</a>.
Readers are advised to refer to the "editor's draft" at that URL for an up-to-date
version of this document.<a href="#section-1-5" class="pilcrow">¶</a></p>
<div id="data_types">
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
interpreted as described in <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">While the qlog schema's are format-agnostic, for readability the qlog documents
will use a JSON-inspired format (<span>[<a href="#RFC8259" class="xref">RFC8259</a>]</span>) for examples and definitions.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">As qlog can be serialized both textually but also in binary, we employ a custom
datatype definition language, inspired loosely by the <a href="https://www.typescriptlang.org/">"TypeScript"
language</a>.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">This document describes how to employ JSON and NDJSON as textual serializations
for qlog in <a href="#concrete-formats" class="xref">Section 4</a>. Other documents will describe how to utilize
other concrete serialization options, though tips and requirements for these are
also listed in this document (<a href="#concrete-formats" class="xref">Section 4</a>).<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">The main general conventions in this document a reader should be aware of are:<a href="#section-1.1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-6.1">obj? : this object is optional<a href="#section-1.1-6.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.2">type1 | type2 : a union of these two types (object can be either type1 OR
type2)<a href="#section-1.1-6.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.3">obj:type : this object has this concrete type<a href="#section-1.1-6.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.4">obj:array&lt;type&gt; : this object is an array of this type<a href="#section-1.1-6.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.5">class : defines a new type<a href="#section-1.1-6.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-6.6">// : single-line comment<a href="#section-1.1-6.6" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.1-7">The main data types are:<a href="#section-1.1-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-8.1">int8 : signed 8-bit integer<a href="#section-1.1-8.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.2">int16 : signed 16-bit integer<a href="#section-1.1-8.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.3">int32 : signed 32-bit integer<a href="#section-1.1-8.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.4">int64 : signed 64-bit integer<a href="#section-1.1-8.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.5">uint8 : unsigned 8-bit integer<a href="#section-1.1-8.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.6">uint16 : unsigned 16-bit integer<a href="#section-1.1-8.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.7">uint32 : unsigned 32-bit integer<a href="#section-1.1-8.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.8">uint64 : unsigned 64-bit integer<a href="#section-1.1-8.8" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.9">float : 32-bit floating point value<a href="#section-1.1-8.9" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.10">double : 64-bit floating point value<a href="#section-1.1-8.10" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.11">byte : an individual raw byte (8-bit) value (use array&lt;byte&gt; or the
shorthand "bytes" to specify a binary blob)<a href="#section-1.1-8.11" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.12">string : list of ASCII encoded characters<a href="#section-1.1-8.12" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.13">boolean : boolean<a href="#section-1.1-8.13" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.14">enum: fixed list of values (Unless explicity defined, the value of an enum entry
is the string version of its name (e.g., initial = "initial"))<a href="#section-1.1-8.14" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.1-8.15">any : represents any object type. Mainly used here as a placeholder for more
concrete types defined in related documents (e.g., specific event types)<a href="#section-1.1-8.15" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.1-9">All timestamps and time-related values (e.g., offsets) in qlog are logged as
doubles in the millisecond resolution.<a href="#section-1.1-9" class="pilcrow">¶</a></p>
<p id="section-1.1-10">Other qlog documents can define their own data types (e.g., separately for each
Packet type that a protocol supports).<a href="#section-1.1-10" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="design-goals">
<section id="section-2">
      <h2 id="name-design-goals">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-design-goals" class="section-name selfRef">Design goals</a>
      </h2>
<p id="section-2-1">The main tenets for the qlog schema design are:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">Streamable, event-based logging<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.2">Flexibility in the format, complexity in the tooling (e.g., few components are a
MUST, tools need to deal with this)<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.3">Extensible and pragmatic (e.g., no complex fixed schema with extension points)<a href="#section-2-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.4">Aggregation and transformation friendly (e.g., the top-level element is a
container for individual traces, group_id can be used to tag events to a
particular context)<a href="#section-2-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.5">Metadata is stored together with event data<a href="#section-2-2.5" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="top-level">
<section id="section-3">
      <h2 id="name-the-high-level-qlog-schema">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-the-high-level-qlog-schema" class="section-name selfRef">The high level qlog schema</a>
      </h2>
<p id="section-3-1">A qlog file should be able to contain several indivdual traces and logs from
multiple vantage points that are in some way related. To that end, the top-level
element in the qlog schema defines only a small set of "header" fields and an
array of component traces. For this document, the required "qlog_version" field
MUST have a value of "draft-02-RC1".<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">As qlog can be serialized in a variety of ways, the "qlog_format" field is used to
indicate which serialization option was chosen. Its value MUST either be one of
the options defined in this document (e.g., <a href="#concrete-formats" class="xref">Section 4</a>) or the field
must be omitted entirely, in which case it assumes the default value of "JSON".<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">In order to make it easier to parse and identify qlog files and their
serialization format, the "qlog_version" and "qlog_format" fields and their values
SHOULD be in the first 256 characters/bytes of the resulting log file.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">An example of the qlog file's top-level structure is shown in <a href="#top-element" class="xref">Figure 1</a>.<a href="#section-3-4" class="pilcrow">¶</a></p>
<span id="name-top-level-element"></span><div id="top-element">
<figure id="figure-1">
        <div class="artwork art-text alignLeft art-json" id="section-3-5.1">
<pre>
Definition:

class QlogFile {
    qlog_version:string,
    qlog_format?:string,
    title?:string,
    description?:string,
    summary?: Summary,
    traces: array&lt;Trace|TraceError&gt;
}

JSON serialization:

{
    "qlog_version": "draft-02-RC1",
    "qlog_format": "JSON",
    "title": "Name of this particular qlog file (short)",
    "description": "Description for this group of traces (long)",
    "summary": {
        ...
    },
    "traces": [...]
}
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-top-level-element" class="selfRef">Top-level element</a>
        </figcaption></figure>
</div>
<div id="summary">
<section id="section-3.1">
        <h3 id="name-summary">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-summary" class="section-name selfRef">summary</a>
        </h3>
<p id="section-3.1-1">In a real-life deployment with a large amount of generated logs, it can be useful
to sort and filter logs based on some basic summarized or aggregated data (e.g.,
log length, packet loss rate, log location, presence of error events, ...). The
summary field (if present) SHOULD be on top of the qlog file, as this allows for
the file to be processed in a streaming fashion (i.e., the implementation could
just read up to and including the summary field and then only load the full logs
that are deemed interesting by the user).<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">As the summary field is highly deployment-specific, this document does not specify
any default fields or their semantics. Some examples of potential entries are
shown in <a href="#summary-example" class="xref">Figure 2</a>.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<span id="name-summary-example-definition"></span><div id="summary-example">
<figure id="figure-2">
          <div class="artwork art-text alignLeft art-json" id="section-3.1-3.1">
<pre>
Definition (purely illustrative example):

class Summary {
    "trace_count":uint32, // amount of traces in this file
    "max_duration":uint64, // time duration of the longest trace in ms
    "max_outgoing_loss_rate":float, // highest loss rate for outgoing packets over all traces
    "total_event_count":uint64, // total number of events across all traces,
    "error_count":uint64 // total number of error events in this trace
}

JSON serialization:

{
    "trace_count": 1,
    "max_duration": 5006,
    "max_outgoing_loss_rate": 0.013,
    "total_event_count": 568,
    "error_count": 2
}
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-summary-example-definition" class="selfRef">Summary example definition</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="traces">
<section id="section-3.2">
        <h3 id="name-traces">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-traces" class="section-name selfRef">traces</a>
        </h3>
<p id="section-3.2-1">It is often advantageous to group several related qlog traces together in a single
file. For example, we can simultaneously perform logging on the client, on the
server and on a single point on their common network path. For analysis, it is
useful to aggregate these three individual traces together into a single file, so
it can be uniquely stored, transferred and annotated.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">As such, the "traces" array contains a list of individual qlog traces. Typical
qlogs will only contain a single trace in this array. These can later be combined
into a single qlog file by taking the "traces" entry/entries for each qlog file
individually and copying them to the "traces" array of a new, aggregated qlog
file. This is typically done in a post-processing step.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">The "traces" array can thus contain both normal traces (for the definition of the
Trace type, see <a href="#trace" class="xref">Section 3.3</a>), but also "error" entries. These indicate that we tried
to find/convert a file for inclusion in the aggregated qlog, but there was an
error during the process. Rather than silently dropping the erroneous file, we can
opt to explicitly include it in the qlog file as an entry in the "traces" array,
as shown in <a href="#trace-error" class="xref">Figure 3</a>.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<span id="name-traceerror-definition"></span><div id="trace-error">
<figure id="figure-3">
          <div class="artwork art-text alignLeft art-json" id="section-3.2-4.1">
<pre>
Definition:

class TraceError {
    error_description: string, // A description of the error
    uri?: string, // the original URI at which we attempted to find the file
    vantage_point?: VantagePoint // see {{vantage_point}}: the vantage point we were expecting to include here
}

JSON serialization:

{
    "error_description": "File could not be found",
    "uri": "/srv/traces/today/latest.qlog",
    "vantage_point": { type: "server" }
}
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-traceerror-definition" class="selfRef">TraceError definition</a>
          </figcaption></figure>
</div>
<p id="section-3.2-5">Note that another way to combine events of different traces in a single qlog file
is through the use of the "group_id" field, discussed in <a href="#group-ids" class="xref">Section 3.4.7</a>.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="trace">
<section id="section-3.3">
        <h3 id="name-individual-trace-containers">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-individual-trace-containers" class="section-name selfRef">Individual Trace containers</a>
        </h3>
<p id="section-3.3-1">The exact conceptual definition of a Trace can be fluid. For example, a trace
could contain all events for a single connection, for a single endpoint, for a
single measurement interval, for a single protocol, etc. As such, a Trace
container contains some metadata in addition to the logged events, see
<a href="#trace-container" class="xref">Figure 4</a>.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">In the normal use case however, a trace is a log of a single data flow collected
at a single location or vantage point. For example, for QUIC, a single trace only
contains events for a single logical QUIC connection for either the client or the
server.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">The semantics and context of the trace can mainly be deduced from the entries in
the "common_fields" list and "vantage_point" field.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<span id="name-trace-container-definition"></span><div id="trace-container">
<figure id="figure-4">
          <div class="artwork art-text alignLeft art-json" id="section-3.3-4.1">
<pre>
Definition:

class Trace {
    title?: string,
    description?: string,
    configuration?: Configuration,
    common_fields?: CommonFields,
    vantage_point: VantagePoint,
    events: array&lt;Event&gt;
}

JSON serialization:

{
    "title": "Name of this particular trace (short)",
    "description": "Description for this trace (long)",
    "configuration": {
        "time_offset": 150
    },
    "common_fields": {
        "ODCID": "abcde1234",
        "time_format": "absolute"
    },
    "vantage_point": {
        "name": "backend-67",
        "type": "server"
    },
    "events": [...]
}
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-trace-container-definition" class="selfRef">Trace container definition</a>
          </figcaption></figure>
</div>
<div id="configuration">
<section id="section-3.3.1">
          <h4 id="name-configuration">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-configuration" class="section-name selfRef">configuration</a>
          </h4>
<p id="section-3.3.1-1">We take into account that a qlog file is usually not used in isolation, but by
means of various tools. Especially when aggregating various traces together or
preparing traces for a demonstration, one might wish to persist certain tool-based
settings inside the qlog file itself. For this, the configuration field is used.<a href="#section-3.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1-2">The configuration field can be viewed as a generic metadata field that tools can
fill with their own fields, based on per-tool logic. It is best practice for tools
to prefix each added field with their tool name to prevent collisions across
tools. This document only defines two optional, standard, tool-independent
configuration settings: "time_offset" and "original_uris".<a href="#section-3.3.1-2" class="pilcrow">¶</a></p>
<span id="name-configuration-definition"></span><div id="configuration_example">
<figure id="figure-5">
            <div class="artwork art-text alignLeft art-json" id="section-3.3.1-3.1">
<pre>
Definition:

class Configuration {
    time_offset:double, // in ms,
    original_uris: array&lt;string&gt;,

    // list of fields with any type
}

JSON serialization:

{
    "time_offset": 150, // starts 150ms after the first timestamp indicates
    "original_uris": [
        "https://example.org/trace1.qlog",
        "https://example.org/trace2.qlog"
    ]
}
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-configuration-definition" class="selfRef">Configuration definition</a>
            </figcaption></figure>
</div>
<div id="timeoffset">
<section id="section-3.3.1.1">
            <h5 id="name-time_offset">
<a href="#section-3.3.1.1" class="section-number selfRef">3.3.1.1. </a><a href="#name-time_offset" class="section-name selfRef">time_offset</a>
            </h5>
<p id="section-3.3.1.1-1">The time_offset field indicates by how many milliseconds the starting time of the current
trace should be offset. This is useful when comparing logs taken from various
systems, where clocks might not be perfectly synchronous. Users could use manual
tools or automated logic to align traces in time and the found optimal offsets can
be stored in this field for future usage. The default value is 0.<a href="#section-3.3.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="originaluris">
<section id="section-3.3.1.2">
            <h5 id="name-original_uris">
<a href="#section-3.3.1.2" class="section-number selfRef">3.3.1.2. </a><a href="#name-original_uris" class="section-name selfRef">original_uris</a>
            </h5>
<p id="section-3.3.1.2-1">The original_uris field is used when merging multiple individual qlog files or
other source files (e.g., when converting .pcaps to qlog). It allows to keep
better track where certain data came from. It is a simple array of strings. It is
an array instead of a single string, since a single qlog trace can be made up out
of an aggregation of multiple component qlog traces as well. The default value is
an empty array.<a href="#section-3.3.1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="custom-fields">
<section id="section-3.3.1.3">
            <h5 id="name-custom-fields">
<a href="#section-3.3.1.3" class="section-number selfRef">3.3.1.3. </a><a href="#name-custom-fields" class="section-name selfRef">custom fields</a>
            </h5>
<p id="section-3.3.1.3-1">Tools can add optional custom metadata to the "configuration" field to store state
and make it easier to share specific data viewpoints and view configurations.<a href="#section-3.3.1.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1.3-2">Two examples from the <a href="https://qvis.edm.uhasselt.be">qvis toolset</a> are shown in
<a href="#qvis-config" class="xref">Figure 6</a>.<a href="#section-3.3.1.3-2" class="pilcrow">¶</a></p>
<span id="name-custom-configuration-fields"></span><div id="qvis-config">
<figure id="figure-6">
              <div class="artwork art-text alignLeft" id="section-3.3.1.3-3.1">
<pre>
{
    "configuration" : {
        "qvis" : {
            // when loaded into the qvis toolsuite's congestion graph tool
            // zoom in on the period between 1s and 2s and select the 124th event defined in this trace
            "congestion_graph": {
                "startX": 1000,
                "endX": 2000,
                "focusOnEventIndex": 124
            }


            // when loaded into the qvis toolsuite's sequence diagram tool
            // automatically scroll down the timeline to the 555th event defined in this trace
            "sequence_diagram" : {
                "focusOnEventIndex": 555
            }
        }
    }
}
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-custom-configuration-fields" class="selfRef">Custom configuration fields example</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="vantage-point">
<section id="section-3.3.2">
          <h4 id="name-vantage_point">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-vantage_point" class="section-name selfRef">vantage_point</a>
          </h4>
<p id="section-3.3.2-1">The vantage_point field describes the vantage point from which the trace
originates, see <a href="#vantage-point-example" class="xref">Figure 7</a>. Each trace can have only a single vantage_point
and thus all events in a trace MUST BE from the perspective of this vantage_point.
To include events from multiple vantage_points, implementers can for example
include multiple traces, split by vantage_point, in a single qlog file.<a href="#section-3.3.2-1" class="pilcrow">¶</a></p>
<span id="name-vantagepoint-definition"></span><div id="vantage-point-example">
<figure id="figure-7">
            <div class="artwork art-text alignLeft art-json" id="section-3.3.2-2.1">
<pre>
Definition:

class VantagePoint {
    name?: string,
    type: VantagePointType,
    flow?: VantagePointType
}

class VantagePointType {
    server, // endpoint which initiates the connection.
    client, // endpoint which accepts the connection.
    network, // observer in between client and server.
    unknown
}

JSON serialization examples:

{
    "name": "aioquic client",
    "type": "client",
}

{
    "name": "wireshark trace",
    "type": "network",
    "flow": "client"
}
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-vantagepoint-definition" class="selfRef">VantagePoint definition</a>
            </figcaption></figure>
</div>
<p id="section-3.3.2-3">The flow field is only required if the type is "network" (for example, the trace
is generated from a packet capture). It is used to disambiguate events like
"packet sent" and "packet received". This is indicated explicitly because for
multiple reasons (e.g., privacy) data from which the flow direction can be
otherwise inferred (e.g., IP addresses) might not be present in the logs.<a href="#section-3.3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.3.2-4">Meaning of the different values for the flow field:
  * "client" indicates that this vantage point follows client data flow semantics (a
    "packet sent" event goes in the direction of the server).
  * "server" indicates that this vantage point follow server data flow semantics (a
    "packet sent" event goes in the direction of the client).
  * "unknown" indicates that the flow's direction is unknown.<a href="#section-3.3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.3.2-5">Depending on the context, tools confronted with "unknown" values in the
vantage_point can either try to heuristically infer the semantics from
protocol-level domain knowledge (e.g., in QUIC, the client always sends the first
packet) or give the user the option to switch between client and server
perspectives manually.<a href="#section-3.3.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="field-name-semantics">
<section id="section-3.4">
        <h3 id="name-field-name-semantics">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-field-name-semantics" class="section-name selfRef">Field name semantics</a>
        </h3>
<p id="section-3.4-1">Inside of the "events" field of a qlog trace is a list of events logged by the
endpoint. Each event is specified as a generic object with a number of member
fields and their associated data. Depending on the protocol and use case, the
exact member field names and their formats can differ across implementations. This
section lists the main, pre-defined and reserved field names with specific
semantics and expected corresponding value formats.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">Each qlog event at minimum requires the "time" (<a href="#time-based-fields" class="xref">Section 3.4.1</a>), "name"
(<a href="#name-field" class="xref">Section 3.4.2</a>) and "data" (<a href="#data-field" class="xref">Section 3.4.3</a>) fields. Other typical fields are
"time_format" (<a href="#time-based-fields" class="xref">Section 3.4.1</a>), "protocol_type" (<a href="#protocol-type-field" class="xref">Section 3.4.4</a>),
"trigger" (<a href="#trigger-field" class="xref">Section 3.4.6</a>), and "group_id" <a href="#group-ids" class="xref">Section 3.4.7</a>. As especially these
later fields typically have identical values across individual event instances,
they are normally logged separately in the "common_fields" (<a href="#common-fields" class="xref">Section 3.4.8</a>).<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4-3">The specific values for each of these fields and their semantics are defined in
separate documents, specific per protocol or use case. For example: event
definitions for QUIC and HTTP/3 can be found in <span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span>.<a href="#section-3.4-3" class="pilcrow">¶</a></p>
<p id="section-3.4-4">Other fields are explicitly allowed by the qlog approach, and tools SHOULD allow
for the presence of unknown event fields, but their semantics depend on the
context of the log usage (e.g., for QUIC, the ODCID field is used), see
<span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span>.<a href="#section-3.4-4" class="pilcrow">¶</a></p>
<p id="section-3.4-5">An example of a qlog event with its component fields is shown in
<a href="#event-definition" class="xref">Figure 8</a>.<a href="#section-3.4-5" class="pilcrow">¶</a></p>
<span id="name-event-fields-definition"></span><div id="event-definition">
<figure id="figure-8">
          <div class="artwork art-text alignLeft art-json" id="section-3.4-6.1">
<pre>
Definition:

class Event {
    time: double,
    name: string,
    data: any,

    protocol_type?: string,
    group_id?: string|uint32,

    time_format?: "absolute"|"delta"|"relative",

    // list of fields with any type
}

JSON serialization:

{
    time: 1553986553572,

    name: "transport:packet_sent",
    event: "packet_sent",
    data: { ... }

    protocol_type:  "QUIC_HTTP3",
    group_id: "127ecc830d98f9d54a42c4f0842aa87e181a",

    time_format: "absolute",

    ODCID: "127ecc830d98f9d54a42c4f0842aa87e181a", // QUIC specific
}
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-event-fields-definition" class="selfRef">Event fields definition</a>
          </figcaption></figure>
</div>
<div id="time-based-fields">
<section id="section-3.4.1">
          <h4 id="name-timestamps">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-timestamps" class="section-name selfRef">timestamps</a>
          </h4>
<p id="section-3.4.1-1">The "time" field indicates the timestamp at which the event occured. Its value is
typically the Unix timestamp since the 1970 epoch (number of milliseconds since
midnight UTC, January 1, 1970, ignoring leap seconds). However, qlog supports two
more succint timestamps formats to allow reducing file size. The employed format
is indicated in the "time_format" field, which allows one of three values:
"absolute", "delta" or "relative":<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4.1-2.1">Absolute: Include the full absolute timestamp with each event. This approach
uses the largest amount of characters. This is also the default value of the
"time_format" field.<a href="#section-3.4.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.4.1-2.2">Delta: Delta-encode each time value on the previously logged value. The first
event in a trace typically logs the full absolute timestamp. This approach uses
the least amount of characters.<a href="#section-3.4.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.4.1-2.3">Relative: Specify a full "reference_time" timestamp (typically this is done
up-front in "common_fields", see <a href="#common-fields" class="xref">Section 3.4.8</a>) and include only
relatively-encoded values based on this reference_time with each event. The
"reference_time" value is typically the first absolute timestamp. This approach
uses a medium amount of characters.<a href="#section-3.4.1-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-3.4.1-3">The first option is good for stateless loggers, the second and third for stateful
loggers. The third option is generally preferred, since it produces smaller files
while being easier to reason about. An example for each option can be seen in
<a href="#time-examples" class="xref">Figure 9</a>.<a href="#section-3.4.1-3" class="pilcrow">¶</a></p>
<span id="name-three-different-approaches-"></span><div id="time-examples">
<figure id="figure-9">
            <div class="artwork art-text alignLeft" id="section-3.4.1-4.1">
<pre>
The absolute approach will use:
1500, 1505, 1522, 1588

The delta approach will use:
1500, 5, 17, 66

The relative approach will:
- set the reference_time to 1500 in "common_fields"
- use: 0, 5, 22, 88

</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-three-different-approaches-" class="selfRef">Three different approaches for logging timestamps</a>
            </figcaption></figure>
</div>
<p id="section-3.4.1-5">One of these options is typically chosen for the entire trace (put differently:
each event has the same value for the "time_format" field). Each event MUST
include a timestamp in the "time" field.<a href="#section-3.4.1-5" class="pilcrow">¶</a></p>
<p id="section-3.4.1-6">Events in each individual trace SHOULD be logged in strictly ascending timestamp
order (though not necessarily absolute value, for the "delta" format). Tools CAN
sort all events on the timestamp before processing them, though are not required
to (as this could impose a significant processing overhead).<a href="#section-3.4.1-6" class="pilcrow">¶</a></p>
<p id="section-3.4.1-7">Timestamps do not have to use the UNIX epoch timestamp as their reference. For
example for privacy considerations, any initial reference timestamps (for example
"endpoint uptime in ms" or "time since connection start in ms") can be chosen.
Tools SHOULD NOT assume the ability to derive the absolute Unix timestamp from
qlog traces, nor allow on them to relatively order events across two or more
separate files (in this case, clock drift should also be taken into account).<a href="#section-3.4.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="name-field">
<section id="section-3.4.2">
          <h4 id="name-category-and-event">
<a href="#section-3.4.2" class="section-number selfRef">3.4.2. </a><a href="#name-category-and-event" class="section-name selfRef">category and event</a>
          </h4>
<p id="section-3.4.2-1">Events differ mainly in the type of metadata associated with them. To help
identify a given event and how to interpret its metadata in the "data" field (see
<a href="#data-field" class="xref">Section 3.4.3</a>), each event has an associated "name" field. This can be considered
as a concatenation of two other fields, namely event "category" and event "type".<a href="#section-3.4.2-1" class="pilcrow">¶</a></p>
<p id="section-3.4.2-2">Category allows a higher-level grouping of events per specific event type. For
example for QUIC and HTTP/3, the different categories could be "transport",
"http", "qpack", and "recovery". Within these categories, the event Type provides
additional granularity. For example for QUIC and HTTP/3, within the "transport"
Category, there would be "packet_sent" and "packet_received" events.<a href="#section-3.4.2-2" class="pilcrow">¶</a></p>
<p id="section-3.4.2-3">Logging category and type separately conceptually allows for fast and high-level
filtering based on category and the re-use of event types across categories.
However, it also considerably inflates the log size and this flexibility is not
used extensively in practice at the time of writing.<a href="#section-3.4.2-3" class="pilcrow">¶</a></p>
<p id="section-3.4.2-4">As such, the default approach in qlog is to concatenate both field values using
the ":" character in the "name" field, as can be seen in <a href="#name-example" class="xref">Figure 10</a>. As
such, qlog category and type names MUST NOT include this character.<a href="#section-3.4.2-4" class="pilcrow">¶</a></p>
<span id="name-ways-of-logging-category-ty"></span><div id="name-example">
<figure id="figure-10">
            <div class="artwork art-text alignLeft" id="section-3.4.2-5.1">
<pre>
JSON serialization using separate fields:
{
    category: "transport",
    type: "packet_sent"
}

JSON serialization using ":" concatenated field:
{
    name: "transport:packet_sent"
}
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-ways-of-logging-category-ty" class="selfRef">Ways of logging category, type and name of an event.</a>
            </figcaption></figure>
</div>
<p id="section-3.4.2-6">Certain serializations CAN emit category and type as separate fields, and qlog
tools SHOULD be able to deal with both the concatenated "name" field, and the
separate "category" and "type" fields. Text-based serializations however are
encouraged to employ the concatenated "name" field for efficiency.<a href="#section-3.4.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="data-field">
<section id="section-3.4.3">
          <h4 id="name-data">
<a href="#section-3.4.3" class="section-number selfRef">3.4.3. </a><a href="#name-data" class="section-name selfRef">data</a>
          </h4>
<p id="section-3.4.3-1">The data field is a generic object. It contains the per-event metadata and its
form and semantics are defined per specific sort of event. For example, data field
value definitons for QUIC and HTTP/3, see <span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span>.<a href="#section-3.4.3-1" class="pilcrow">¶</a></p>
<p id="section-3.4.3-2">One purely illustrative example for a QUIC "packet_sent" event is shown in
<a href="#data-example" class="xref">Figure 11</a>.<a href="#section-3.4.3-2" class="pilcrow">¶</a></p>
<span id="name-example-of-the-data-field-f"></span><div id="data-example">
<figure id="figure-11">
            <div class="artwork art-text alignLeft art-json" id="section-3.4.3-3.1">
<pre>
Definition:

class TransportPacketSentEvent {
    packet_size?:uint32,
    header:PacketHeader,
    frames?:Array&lt;QuicFrame&gt;
}

JSON serialization:

{
    packet_size: 1280,
    header: {
        packet_type: "1RTT",
        packet_number: 123
    },
    frames: [
        {
            frame_type: "stream",
            length: 1000,
            offset: 456
        },
        {
            frame_type: "padding"
        }
    ]
}
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-example-of-the-data-field-f" class="selfRef">Example of the 'data' field for a QUIC packet_sent event</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="protocol-type-field">
<section id="section-3.4.4">
          <h4 id="name-protocol_type">
<a href="#section-3.4.4" class="section-number selfRef">3.4.4. </a><a href="#name-protocol_type" class="section-name selfRef">protocol_type</a>
          </h4>
<p id="section-3.4.4-1">The "protocol_type" field indicates to which protocol (or protocol "stack") this
event belongs. This allows a single qlog file to aggregate traces of different
protocols (e.g., a web server offering both TCP+HTTP/2 and QUIC+HTTP/3
connections).<a href="#section-3.4.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4.4-2">For example, QUIC and HTTP/3 events have the "QUIC_HTTP3" protocol_type value, see
<span>[<a href="#QLOG-QUIC-HTTP3" class="xref">QLOG-QUIC-HTTP3</a>]</span>.<a href="#section-3.4.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4.4-3">Typically however, all events in a single trace are of the same protocol, and this
field is logged once in "common_fields", see <a href="#common-fields" class="xref">Section 3.4.8</a>.<a href="#section-3.4.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="custom-fields-1">
<section id="section-3.4.5">
          <h4 id="name-custom-fields-2">
<a href="#section-3.4.5" class="section-number selfRef">3.4.5. </a><a href="#name-custom-fields-2" class="section-name selfRef">custom fields</a>
          </h4>
<p id="section-3.4.5-1">Note that qlog files can always contain custom fields (e.g., a per-event field
indicating its privacy properties or path_id in multipath protocols) and assign
custom values to existing fields (e.g., new categories/types for
implemenation-specific events). Loggers are free to add such fields and field
values and tools MUST either ignore these unknown fields or show them in a generic
fashion.<a href="#section-3.4.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="trigger-field">
<section id="section-3.4.6">
          <h4 id="name-triggers">
<a href="#section-3.4.6" class="section-number selfRef">3.4.6. </a><a href="#name-triggers" class="section-name selfRef">triggers</a>
          </h4>
<p id="section-3.4.6-1">Sometimes, additional information is needed in the case where a single event can
be caused by a variety of other events. In the normal case, the context of the
surrounding log messages gives a hint as to which of these other events was the
cause. However, in highly-parallel and optimized implementations, corresponding
log messages might separated in time. Another option is to explicitly indicate
these "triggers" in a high-level way per-event to get more fine-grained
information without much additional overhead.<a href="#section-3.4.6-1" class="pilcrow">¶</a></p>
<p id="section-3.4.6-2">In qlog, the optional "trigger" field contains a string value describing the
reason (if any) for this event instance occuring. While this "trigger" field could
be a property of the qlog Event itself, it is instead a property of the "data"
field instead. This choice was made because many event types do not include a
trigger value, and having the field at the Event-level would cause overhead in
some serializations. Additional information on the trigger can be added in the
form of additional member fields of the "data" field value, yet this is highly
implementation-specific, as are the trigger field's string values.<a href="#section-3.4.6-2" class="pilcrow">¶</a></p>
<p id="section-3.4.6-3">One purely illustrative example of some potential triggers for QUIC's
"packet_dropped" event is shown in <a href="#trigger-example" class="xref">Figure 12</a>.<a href="#section-3.4.6-3" class="pilcrow">¶</a></p>
<span id="name-trigger-example"></span><div id="trigger-example">
<figure id="figure-12">
            <div class="artwork art-text alignLeft art-json" id="section-3.4.6-4.1">
<pre>
Definition:

class QuicPacketDroppedEvent {
    packet_type?:PacketType,
    raw_length?:uint32,

    trigger?: "key_unavailable" | "unknown_connection_id" | "decrypt_error" | "unsupported_version"
}
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-trigger-example" class="selfRef">Trigger example</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="group-ids">
<section id="section-3.4.7">
          <h4 id="name-group_id">
<a href="#section-3.4.7" class="section-number selfRef">3.4.7. </a><a href="#name-group_id" class="section-name selfRef">group_id</a>
          </h4>
<p id="section-3.4.7-1">As discussed in <a href="#trace" class="xref">Section 3.3</a>, a single qlog file can contain several traces taken
from different vantage points. However, a single trace from one endpoint can also
contain events from a variety of sources. For example, a server implementation
might choose to log events for all incoming connections in a single large
(streamed) qlog file. As such, we need a method for splitting up events belonging
to separate logical entities.<a href="#section-3.4.7-1" class="pilcrow">¶</a></p>
<p id="section-3.4.7-2">The simplest way to perform this splitting is by associating a "group identifier"
to each event that indicates to which conceptual "group" each event belongs. A
post-processing step can then extract events per group. However, this group
identifier can be highly protocol and context-specific. In the example above, we
might use QUIC's "Original Destination Connection ID" to uniquely identify a
connection. As such, they might add a "ODCID" field to each event. However, a
middlebox logging IP or TCP traffic might rather use four-tuples to identify
connections, and add a "four_tuple" field.<a href="#section-3.4.7-2" class="pilcrow">¶</a></p>
<p id="section-3.4.7-3">As such, to provide consistency and ease of tooling in cross-protocol and
cross-context setups, qlog instead defines the common "group_id" field, which
contains a string value. Implementations are free to use their preferred string
serialization for this field, so long as it contains a unique value per logical
group. Some examples can be seen in <a href="#group-id-example" class="xref">Figure 13</a>.<a href="#section-3.4.7-3" class="pilcrow">¶</a></p>
<span id="name-example-of-group_id-usage"></span><div id="group-id-example">
<figure id="figure-13">
            <div class="artwork art-text alignLeft art-json" id="section-3.4.7-4.1">
<pre>
JSON serialization for events grouped by four tuples and QUIC connection IDs:

events: [
    {
        time: 1553986553579,
        protocol_type: "TCP_HTTPS2",
        group_id: "ip1=2001:67c:1232:144:9498:6df6:f450:110b,ip2=2001:67c:2b0:1c1::198,port1=59105,port2=80",
        name: "transport:packet_received",
        data: { ... },
    },
    {
        time: 1553986553581,
        protocol_type: "QUIC_HTTP3",
        group_id: "127ecc830d98f9d54a42c4f0842aa87e181a",
        name: "transport:packet_sent",
        data: { ... },
    }
]
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-example-of-group_id-usage" class="selfRef">Example of group_id usage</a>
            </figcaption></figure>
</div>
<p id="section-3.4.7-5">Note that in some contexts (for example a Multipath transport protocol) it might
make sense to add additional contextual per-event fields (for example "path_id"),
rather than use the group_id field for that purpose.<a href="#section-3.4.7-5" class="pilcrow">¶</a></p>
<p id="section-3.4.7-6">Note also that, typically, a single trace only contains events belonging to a
single logical group (for example, an individual QUIC connection). As such,
instead of logging the "group_id" field with an identical value for each event
instance, this field is typically logged once in "common_fields", see
<a href="#common-fields" class="xref">Section 3.4.8</a>.<a href="#section-3.4.7-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="common-fields">
<section id="section-3.4.8">
          <h4 id="name-common_fields">
<a href="#section-3.4.8" class="section-number selfRef">3.4.8. </a><a href="#name-common_fields" class="section-name selfRef">common_fields</a>
          </h4>
<p id="section-3.4.8-1">As discussed in the previous sections, information for a typical qlog event varies
in three main fields: "time", "name" and associated data. Additionally, there are
also several more advanced fields that allow mixing events from different
protocols and contexts inside of the same trace (for example "protocol_type" and
"group_id"). In most "normal" use cases however, the values of these advanced
fields are consistent for each event instance (for example, a single trace
contains events for a single QUIC connection).<a href="#section-3.4.8-1" class="pilcrow">¶</a></p>
<p id="section-3.4.8-2">To reduce file size and making logging easier, qlog uses the "common_fields" list
to indicate those fields and their values that are shared by all events in this
component trace. This prevents these fields from being logged for each individual
event. An example of this is shown in <a href="#common-fields-example" class="xref">Figure 14</a>.<a href="#section-3.4.8-2" class="pilcrow">¶</a></p>
<span id="name-example-of-common_fields-us"></span><div id="common-fields-example">
<figure id="figure-14">
            <div class="artwork art-text alignLeft art-json" id="section-3.4.8-3.1">
<pre>
JSON serialization with repeated field values per-event instance:

{
    events: [{
            group_id: "127ecc830d98f9d54a42c4f0842aa87e181a",
            protocol_type: "QUIC_HTTP3",
            time_format: "relative",
            reference_time: "1553986553572",

            time: 2,
            name: "transport:packet_received",
            data: { ... }
        },{
            group_id: "127ecc830d98f9d54a42c4f0842aa87e181a",
            protocol_type: "QUIC_HTTP3",
            time_format: "relative",
            reference_time: "1553986553572",

            time: 7,
            name: "http:frame_parsed",
            data: { ... }
        }
    ]
}

JSON serialization with repeated field values extracted to common_fields:

{
    common_fields: {
        group_id: "127ecc830d98f9d54a42c4f0842aa87e181a",
        protocol_type:  "QUIC_HTTP3",
        time_format: "relative",
        reference_time: "1553986553572"
    },
    events: [
        {
            time: 2,
            name: "transport:packet_received",
            data: { ... }
        },{
            7,
            name: "http:frame_parsed",
            data: { ... }
        }
    ]
}
</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-example-of-common_fields-us" class="selfRef">Example of common_fields usage</a>
            </figcaption></figure>
</div>
<p id="section-3.4.8-4">The "common_fields" field is a generic dictionary of key-value pairs, where the
key is always a string and the value can be of any type, but is typically also a
string or number. As such, unknown entries in this dictionary MUST be disregarded
by the user and tools (i.e., the presence of an uknown field is explicitly NOT an
error).<a href="#section-3.4.8-4" class="pilcrow">¶</a></p>
<p id="section-3.4.8-5">The list of default qlog fields that are typically logged in common_fields (as
opposed to as individual fields per event instance) are:<a href="#section-3.4.8-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4.8-6.1">time_format<a href="#section-3.4.8-6.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.4.8-6.2">reference_time<a href="#section-3.4.8-6.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.4.8-6.3">protocol_type<a href="#section-3.4.8-6.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.4.8-6.4">group_id<a href="#section-3.4.8-6.4" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-3.4.8-7">Tools MUST be able to deal with these fields being defined either on each event
individually or combined in common_fields. Note that if at least one event in a
trace has a different value for a given field, this field MUST NOT be added to
common_fields but instead defined on each event individually. Good example of such
fields are "time" and "data", who are divergent by nature.<a href="#section-3.4.8-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="concrete-formats">
<section id="section-4">
      <h2 id="name-serializing-qlog">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-serializing-qlog" class="section-name selfRef">Serializing qlog</a>
      </h2>
<p id="section-4-1">This document and other related qlog schema definitions are intentionally
serialization-format agnostic. This means that implementers themselves can choose
how to represent and serialize qlog data practically on disk or on the wire. Some
examples of possible formats are JSON, CBOR, CSV, protocol buffers, flatbuffers,
etc.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">All these formats make certain tradeoffs between flexibility and efficiency, with
textual formats like JSON typically being more flexible but also less efficient
than binary formats like protocol buffers. The format choice will depend on the
practical use case of the qlog user. For example, for use in day to day debugging,
a plaintext readable (yet relatively large) format like JSON is probably
preferred. However, for use in production, a more optimized yet restricted format
can be better. In this latter case, it will be more difficult to achieve
interoperability between qlog implementations of various protocol stacks, as some
custom or tweaked events from one might not be compatible with the format of the
other. This will also reflect in tooling: not all tools will support all formats.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">This being said, the authors prefer JSON as the basis for storing qlog, as it
retains full flexibility and maximum interoperability. Storage overhead can be
managed well in practice by employing compression. For this reason, this document
details both how to practically transform qlog schema definitions to JSON and to
the streamable NDJSON. We discuss concrete options to bring down JSON size and
processing overheads in <a href="#optimizations" class="xref">Section 4.3</a>.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">As depending on the employed format different deserializers/parsers should be
used, the "qlog_format" field is used to indicate the chosen serialization
approach.<a href="#section-4-4" class="pilcrow">¶</a></p>
<div id="qlog-to-json-mapping">
<section id="section-4.1">
        <h3 id="name-qlog-to-json-mapping">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-qlog-to-json-mapping" class="section-name selfRef">qlog to JSON mapping</a>
        </h3>
<p id="section-4.1-1">When mapping qlog to normal JSON, the "qlog_format" field MUST have the value
"JSON". This is also the default qlog serialization and default value of this field.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">To facilitate this mapping, the qlog documents employ a format that is close to
pure JSON for its examples and data definitions. Still, as JSON is not a typed
format, there are some practical peculiarities to observe.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<div id="numbers">
<section id="section-4.1.1">
          <h4 id="name-numbers">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-numbers" class="section-name selfRef">numbers</a>
          </h4>
<p id="section-4.1.1-1">While JSON has built-in support for integers up to 64 bits in size, not all JSON
parsers do. For example, none of the major Web browsers support full 64-bit
integers at this time, as all numerical values (both floating-point numbers and
integers) are internally represented as floating point <a href="https://en.wikipedia.org/wiki/Floating-point_arithmetic">IEEE
754</a> values. In practice,
this limits their integers to a maximum value of 2^53-1. Integers larger than that
are either truncated or produce a JSON parsing error. While this is expected to
improve in the future (as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt">"BigInt"
support</a>
has been introduced in most Browsers, though not yet integrated into JSON
parsers), we still need to deal with it here.<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1-2">When transforming an int64, uint64 or double from qlog to JSON, the implementer
can thus choose to either log them as JSON numbers (taking the risk of truncation
or un-parseability) or to log them as strings instead. Logging as strings should
however only be practically needed if the value is likely to exceed 2^53-1. In
practice, even though protocols such as QUIC allow 64-bit values for for example
stream identifiers, these high numbers are unlikely to be reached for the
overwhelming majority of cases. As such, it is probably a valid trade-off to take
the risk and log 64-bit values as JSON numbers instead of strings.<a href="#section-4.1.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1.1-3">Tools processing JSON-based qlog SHOULD however be able to deal with 64-bit fields
being serialized as either strings or numbers.<a href="#section-4.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="bytes">
<section id="section-4.1.2">
          <h4 id="name-bytes">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-bytes" class="section-name selfRef">bytes</a>
          </h4>
<p id="section-4.1.2-1">Unlike most binary formats, JSON does not allow the logging of raw binary blobs
directly. As such, when serializing a byte or array&lt;byte&gt;, a scheme needs to
be chosen.<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<p id="section-4.1.2-2">To represent qlog bytes in JSON, they MUST be serialized to their lowercase
hexadecimal equivalents (with 0 prefix for values lower than 10). All values are
directly appended to each other, without delimiters. The full value is not
prefixed with 0x (as is sometimes common). An example is given in
<a href="#json-bytes-example" class="xref">Figure 15</a>.<a href="#section-4.1.2-2" class="pilcrow">¶</a></p>
<span id="name-example-for-serializing-byt"></span><div id="json-bytes-example">
<figure id="figure-15">
            <div class="artwork art-text alignLeft art-json" id="section-4.1.2-3.1">
<pre>
For the five raw unsigned byte input values of: 5 20 40 171 255, the JSON serialization is:

{
    raw: "051428abff"
}
</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-example-for-serializing-byt" class="selfRef">Example for serializing bytes</a>
            </figcaption></figure>
</div>
<p id="section-4.1.2-4">As such, the resulting string will always have an even amount of characters and
the original byte-size can be retrieved by dividing the string length by 2.<a href="#section-4.1.2-4" class="pilcrow">¶</a></p>
<div id="truncated-values">
<section id="section-4.1.2.1">
            <h5 id="name-truncated-values">
<a href="#section-4.1.2.1" class="section-number selfRef">4.1.2.1. </a><a href="#name-truncated-values" class="section-name selfRef">Truncated values</a>
            </h5>
<p id="section-4.1.2.1-1">In some cases, it can be interesting not to log a full raw blob but instead a
truncated value (for example, only the first 100 bytes of an HTTP response body to
be able to discern which file it actually contained). In these cases, the original
byte-size length cannot be obtained from the serialized value directly. As such,
all qlog schema definitions SHOULD include a separate, length-indicating field for
all fields of type array&lt;byte&gt; they specify. This allows always retrieving
the original length, but also allows the omission of any raw value bytes of the
field completely (e.g., out of privacy or security considerations).<a href="#section-4.1.2.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.2.1-2">To reduce overhead however and in the case the full raw value is logged, the extra
length-indicating field can be left out. As such, tools MUST be able to deal with
this situation and derive the length of the field from the raw value if no
separate length-indicating field is present. All possible permutations are shown
by example in <a href="#json-bytes-example-two" class="xref">Figure 16</a>.<a href="#section-4.1.2.1-2" class="pilcrow">¶</a></p>
<span id="name-example-for-serializing-tru"></span><div id="json-bytes-example-two">
<figure id="figure-16">
              <div class="artwork art-text alignLeft art-json" id="section-4.1.2.1-3.1">
<pre>
// both the full raw value and its length are present (length is redundant)
{
    "raw_length": 5,
    "raw": "051428abff"
}

// only the raw value is present, indicating it represents the fields full value
// the byte length is obtained by calculating raw.length / 2
{
    "raw": "051428abff"
}

// only the length field is present, meaning the value was omitted
{
    "raw_length": 5,
}

// both fields are present and the lengths do not match: the value was truncated to the first three bytes.
{
    "raw_length": 5,
    "raw": "051428"
}

</pre>
</div>
<figcaption><a href="#figure-16" class="selfRef">Figure 16</a>:
<a href="#name-example-for-serializing-tru" class="selfRef">Example for serializing truncated bytes</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="summarizing-table">
<section id="section-4.1.3">
          <h4 id="name-summarizing-table">
<a href="#section-4.1.3" class="section-number selfRef">4.1.3. </a><a href="#name-summarizing-table" class="section-name selfRef">Summarizing table</a>
          </h4>
<p id="section-4.1.3-1">By definition, JSON strings are serialized with quotes. Numbers without.<a href="#section-4.1.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
            <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">qlog type</th>
                <th class="text-left" rowspan="1" colspan="1">JSON type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">int8</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">int16</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">int32</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uint8</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uint16</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uint32</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">float</td>
                <td class="text-left" rowspan="1" colspan="1">number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">int64</td>
                <td class="text-left" rowspan="1" colspan="1">number or string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">uint64</td>
                <td class="text-left" rowspan="1" colspan="1">number or string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">double</td>
                <td class="text-left" rowspan="1" colspan="1">number or string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">bytes</td>
                <td class="text-left" rowspan="1" colspan="1">string (lowercase hex value)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">string</td>
                <td class="text-left" rowspan="1" colspan="1">string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">boolean</td>
                <td class="text-left" rowspan="1" colspan="1">string ("true" or "false")</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">enum</td>
                <td class="text-left" rowspan="1" colspan="1">string (full value/name, not index)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">any</td>
                <td class="text-left" rowspan="1" colspan="1">object  ( {...} )</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">array</td>
                <td class="text-left" rowspan="1" colspan="1">array   ( [...] )</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="other-json-specifics">
<section id="section-4.1.4">
          <h4 id="name-other-json-specifics">
<a href="#section-4.1.4" class="section-number selfRef">4.1.4. </a><a href="#name-other-json-specifics" class="section-name selfRef">Other JSON specifics</a>
          </h4>
<p id="section-4.1.4-1">Most JSON parsers strictly follow the JSON specification. This includes the rule
that trailing comma's are not allowed. As it is frequently annoying to remove
these trailing comma's when logging events in a streaming fashion, tool
implementers SHOULD allow the last event entry of a qlog trace to be an empty
object. This allows loggers to simply close the qlog file by appending "{}]}]}"
after their last added event.<a href="#section-4.1.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="qlog-to-ndjson-mapping">
<section id="section-4.2">
        <h3 id="name-qlog-to-ndjson-mapping">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-qlog-to-ndjson-mapping" class="section-name selfRef">qlog to NDJSON mapping</a>
        </h3>
<p id="section-4.2-1">One of the downsides of using pure JSON is that it is inherently a non-streamable
format. Put differently, it is not possible to simply append new qlog events to a
log file without "closing" this file at the end by appending "]}]}". Without these
closing tags, most JSON parsers will be unable to parse the file entirely. As most
platforms do not provide a standard streaming JSON parser (which would be able to
deal with this problem), this document also provides a qlog mapping to a
streamable JSON format called <a href="http://ndjson.org/">Newline-Delimited JSON
(NDJSON)</a>.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">When mapping qlog to NDJSON, the "qlog_format" field MUST have the value "NDJSON".<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">NDJSON is very similar to JSON, except that it interprets each line in a file as a
fully separate JSON object. Put differently, unlike default JSON, it does not
require a file to be wrapped as a full object with "{ ... }" or "[ ... ]". Using
this setup, qlog events can simply be appended as individually serialized lines at
the back of a streamed logging file.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">For this to work, some qlog definitions have to be adjusted however. Mainly,
events are no longer part of the "events" array in the Trace object, but are
instead logged separately from the qlog "file header" (QlogFile class in
<a href="#top-level" class="xref">Section 3</a>). Additionally, qlog's NDJSON mapping does not allow logging
multiple individual traces in a single qlog file. As such, the QlogFile:traces
field is replaced by the singular "trace" field, which simply contains the Trace
data directly. An example can be seen in <a href="#ndjson-example" class="xref">Figure 17</a>. Note that the
"group_id" field can still be used on a per-event basis to include events from
conceptually different sources in a single NDJSON qlog file.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">Note as well from <a href="#ndjson-example" class="xref">Figure 17</a> that the file's header (QlogFileNDJSON) also
needs to be fully serialized on a single line to be NDJSON compatible.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<span id="name-top-level-element-2"></span><div id="ndjson-example">
<figure id="figure-17">
          <div class="artwork art-text alignLeft art-json" id="section-4.2-6.1">
<pre>
Definition:

class QlogFileNDJSON {
    qlog_format: "NDJSON",

    qlog_version:string,
    title?:string,
    description?:string,
    summary?: Summary,
    trace: Trace
}
// list of qlog events, separated by newlines

NDJSON serialization:

{"qlog_format":"NDJSON","qlog_version":"draft-02","title":"Name of this particular NDJSON qlog file (short)","description":"Description for this NDJSON qlog file (long)","trace":{"common_fields":{"protocol_type":"QUIC_HTTP3","group_id":"127ecc830d98f9d54a42c4f0842aa87e181a","time_format":"relative","reference_time":"1553986553572"},"vantage_point":{"name":"backend-67","type":"server"}}}
{"time": 2, "name": "transport:packet_received", "data": { ... } }
{"time": 7, "name": "http:frame_parsed", "data": { ... } }
</pre>
</div>
<figcaption><a href="#figure-17" class="selfRef">Figure 17</a>:
<a href="#name-top-level-element-2" class="selfRef">Top-level element</a>
          </figcaption></figure>
</div>
<div id="supporting-ndjson-in-tooling">
<section id="section-4.2.1">
          <h4 id="name-supporting-ndjson-in-toolin">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-supporting-ndjson-in-toolin" class="section-name selfRef">Supporting NDJSON in tooling</a>
          </h4>
<p id="section-4.2.1-1">Note that NDJSON is not supported in most default programming environments (unlike
normal JSON). However, several <a href="http://ndjson.org/libraries.html">custom NDJSON parsing libraries
exist</a> that can be used and the format is easy
enough to parse with existing implementations (i.e., by splitting the file into
its component lines and feeding them to a normal JSON parser individually, as each
line by itself is a valid JSON object).<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="optimizations">
<section id="section-4.3">
        <h3 id="name-optimization-options">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-optimization-options" class="section-name selfRef">Optimization options</a>
        </h3>
<p id="section-4.3-1">Besides moving to a stricter, binary format (such as protocol buffers), there are
various options to reduce the size of a JSON-based qlog format. As we as authors
believe JSON is the format best suited for qlog, we also formalize a few of these
optimization options here. Tools SHOULD support these if they intend to be useful
across protocol stacks.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">TODO: common_fields as expected, default, no-brainer optimization
TODO: cbor and compression as recommended optimizations
TODO: event_fields/csv as potential optimization
TODO: dictionary-based as potential optimization
TODO: protobuf or other binary format as potential optimization with flexibility caveat<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">TODO: link to discussion + reproduce results table here (first get resutls for the
non-event-field version of qlog though)<a href="#section-4.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conversion-between-formats">
<section id="section-4.4">
        <h3 id="name-conversion-between-formats">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-conversion-between-formats" class="section-name selfRef">Conversion between formats</a>
        </h3>
<p id="section-4.4-1">TODO: rework this text and make it more general about converters<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">Note that, even with the optimizations detailed above, it is to be expected that
qlog files (as they are JSON) will be relatively large when compared to binary
formats. If this turns out to be an issue in a real deployment, it is a perfectly
acceptable practices to first generate the initial application-side logs in
another (custom) (binary) format. Afterwards, those bespoke files can then be
transformed into the qlog format for improved interoperability with tools and
other logs. A prime example of this is converting of binary .pcap packet capture
files (e.g., obtained from wireshark or tcpdump) to the qlog format. <a href="https://github.com/quiclog/pcap2qlog">Such a
conversion tool is available for the QUIC and HTTP/3
protocols</a>. Other examples include
<a href="https://github.com/quiclog/qvis/tree/master/visualizations/src/components/filemanager/netlogconverter">converting Chromium's Netlog format to
qlog</a>
and transforming <a href="https://github.com/quiclog/quictrace2qlog">quictrace to qlog</a>.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="methods-of-access-and-generation">
<section id="section-5">
      <h2 id="name-methods-of-access-and-gener">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-methods-of-access-and-gener" class="section-name selfRef">Methods of access and generation</a>
      </h2>
<p id="section-5-1">Different implementations will have different ways of generating and storing
qlogs. However, there is still value in defining a few default ways in which to
steer this generation and access of the results.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="set-destination-via-an-environment-variable">
<section id="section-5.1">
        <h3 id="name-set-destination-via-an-envi">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-set-destination-via-an-envi" class="section-name selfRef">Set destination via an environment variable</a>
        </h3>
<p id="section-5.1-1">To provide users control over where and how qlog files are created, we define two
environment variables. The first, QLOGFILE, indicates a full path to where an
individual qlog file should be stored. The second, QLOGDIR, sets a general
directory path in which qlog files should be placed. This path MUST include the
directory separator character at the end.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">In general, QLOGDIR should be preferred over QLOGFILE if an endpoint is prone to
generate multiple qlog files. This can for example be the case for a QUIC server
implementation that logs each QUIC connection in a separate qlog file. An
alternative that uses QLOGFILE would be a QUIC server that logs all connections in
a single file and uses the "group_id" field (<a href="#group-ids" class="xref">Section 3.4.7</a>) to allow post-hoc
separation of events. It is expected most implementations would only support
QLOGDIR, even for situations where just one qlog file will be written.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">When using QLOGDIR, it is up to the implementation to choose an appropriate naming
scheme for the qlog files themselves. The chosen scheme will typically depend on
the context or protocols used. For example, for QUIC, it is recommended to use the
Original Destination Connection ID (ODCID), followed by the vantage point type of
the logging endpoint. Examples of all options for QUIC are shown in
<a href="#qlogdir-example" class="xref">Figure 18</a>.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<span id="name-environment-variable-exampl"></span><div id="qlogdir-example">
<figure id="figure-18">
          <div class="artwork art-text alignLeft art-json" id="section-5.1-4.1">
<pre>
Command: QLOGFILE=/srv/qlogs/client.qlog quicclientbinary

Should result in the the quicclientbinary executable logging a single qlog file named client.qlog in the /srv/qlogs directory.
This is for example useful in tests when the client sets up just a single connection and then exits.

Command: QLOGDIR=/srv/qlogs/ quicserverbinary

Should result in the quicserverbinary executable generating several logs files, one for each QUIC connection.
Given two QUIC connections, with ODCID values "abcde" and "12345" respectively, this would result in two files:
/srv/qlogs/abcde_server.qlog
/srv/qlogs/12345_server.qlog

Command: QLOGFILE=/srv/qlogs/server.qlog quicserverbinary

Should result in the the quicserverbinary executable logging a single qlog file named server.qlog in the /srv/qlogs directory.
Given that the server handled two QUIC connections before it was shut down, with ODCID values "abcde" and "12345" respectively,
this would result in event instances in the qlog file being tagged with the "group_id" field with values "abcde" and "12345".
</pre>
</div>
<figcaption><a href="#figure-18" class="selfRef">Figure 18</a>:
<a href="#name-environment-variable-exampl" class="selfRef">Environment variable examples for a QUIC implementation</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="access-logs-via-a-well-known-endpoint">
<section id="section-5.2">
        <h3 id="name-access-logs-via-a-well-know">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-access-logs-via-a-well-know" class="section-name selfRef">Access logs via a well-known endpoint</a>
        </h3>
<p id="section-5.2-1">After generation, qlog implementers MAY make generated logs and traces on an
endpoint (typically the server) available via the following .well-known URI:<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2-2.1">.well-known/qlog/IDENTIFIER.extension<a href="#section-5.2-2.1" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.2-3">The IDENTIFIER variable depends on the context and the protocol. For example for
QUIC, the lowercase Original Destination Connection ID (ODCID) is recommended, as
it can uniquely identify a connection. Additionally, the extension depends on the
chosen format. While this should typically be .qlog, it can take other values as
well, as discussed in <a href="#optimizations" class="xref">Section 4.3</a>. For example, for a QUIC connection with
ODCID "abcde", the endpoint for fetching its default JSON-formatted .qlog file
would be:<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-5.2-4.1">.well-known/qlog/abcde.qlog<a href="#section-5.2-4.1" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.2-5">Implementers SHOULD allow users to fetch logs for a given connection on a 2nd,
separate connection. This helps prevent pollution of the logs by fetching them
over the same connection that one wishes to observe through the log. Ideally, for
the QUIC use case, the logs should also be approachable via an HTTP/2 or HTTP/1.1
endpoint (i.e., on TCP port 443), to aid debugging.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
<p id="section-5.2-6">qlog implementers SHOULD NOT enable this .well-known endpoint in typical
production settings to prevent (malicious) users from downloading logs from other
connections. Implementers are advised to disable this endpoint by default and
require specific actions from the end users to enable it (and potentially qlog
itself). Implementers should also take into account the general privacy and
security guidelines discussed in <a href="#privacy" class="xref">Section 7</a> before exposing qlogs to outside
actors.<a href="#section-5.2-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="tooling-requirements">
<section id="section-6">
      <h2 id="name-tooling-requirements">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-tooling-requirements" class="section-name selfRef">Tooling requirements</a>
      </h2>
<p id="section-6-1">Tools MUST indicate which qlog version(s) they support. Additionally, they SHOULD
indicate exactly which values for and properties of the name (category and type)
and data fields they look for to execute their logic. Tools SHOULD perform a
(high-level) check if an input qlog file adheres to the expected qlog schema. If a
tool determines a qlog file does not contain enough supported information to
correctly execute the tool's logic, it SHOULD generate a clear error message to
this effect.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Tools MUST NOT produce errors for any field names and/or values in the qlog format
that they do not recognize. Tools CAN indicate unknown event occurences within
their context (e.g., marking unknown events on a timeline for manual
interpretation by the user).<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">Tool authors should be aware that, depending on the logging implementation, some
events will not always be present in all traces. For example, using a circular
logging buffer of a fixed size, it could be that the earliest events (e.g.,
connection setup events) are later overwritten by "newer" events. Alternatively,
some events can be intentionally omitted out of privacy or file size
considerations. Tool authors are encouraged to make their tools robust enough to
still provide adequate output for incomplete logs. Loggers using a circular buffer
are in turn reminded of the requirement of listing events in strict time order, as
per <a href="#time-based-fields" class="xref">Section 3.4.1</a>.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">TODO: Tools SHOULD indicate which qlog serialization formats they support. SHOULD
allow uploading of .qlog and .json. SHOULD allow uploading of .cbor, .zip and
.brotli. No standards in place, so we make some recommendations for file extensions.<a href="#section-6-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="privacy">
<section id="section-7">
      <h2 id="name-security-and-privacy-consid">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-and-privacy-consid" class="section-name selfRef">Security and privacy considerations</a>
      </h2>
<p id="section-7-1">TODO : discuss privacy and security considerations (e.g., what NOT to log, what to
strip out of a log before sharing, ...)<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">TODO: primarily the .well-known URI<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="QLOG-QUIC-HTTP3">[QLOG-QUIC-HTTP3]</dt>
      <dd>
<span class="refAuthor">Marx, R., Ed.</span>, <span class="refTitle">"QUIC and HTTP/3 event definitions for qlog"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-marx-qlog-event-definitions-quic-h3-02</span>, <time datetime="2020-09-15" class="refDate">15 September 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-marx-qlog-event-definitions-quic-h3-02">https://tools.ietf.org/html/draft-marx-qlog-event-definitions-quic-h3-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8259">[RFC8259]</dt>
      <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8259">https://www.rfc-editor.org/info/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="change-log">
<section id="section-appendix.a">
      <h2 id="name-change-log">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<div id="since-draft-marx-qlog-main-schema-01">
<section id="section-a.1">
        <h2 id="name-since-draft-marx-qlog-main-">
<a href="#section-a.1" class="section-number selfRef">A.1. </a><a href="#name-since-draft-marx-qlog-main-" class="section-name selfRef">Since draft-marx-qlog-main-schema-01:</a>
        </h2>
<ul class="normal">
<li class="normal" id="section-a.1-1.1">
            <p id="section-a.1-1.1.1">Decoupled qlog from the JSON format and described a mapping instead (#89)<a href="#section-a.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-a.1-1.1.2.1">Data types are now specified in this document and proper definitions for
fields were added in this format<a href="#section-a.1-1.1.2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-a.1-1.1.2.2">64-bit numbers can now be either strings or numbers, with a preference for
numbers (#10)<a href="#section-a.1-1.1.2.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-a.1-1.1.2.3">binary blobs are now logged as lowercase hex strings (#39, #36)<a href="#section-a.1-1.1.2.3" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-a.1-1.1.2.4">added guidance to add length-specifiers for binary blobs (#102)<a href="#section-a.1-1.1.2.4" class="pilcrow">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-a.1-1.2">Removed "time_units" from Configuration. All times are now in ms instead (#95)<a href="#section-a.1-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-a.1-1.3">Removed the "event_fields" setup for a more straightforward JSON format
(#101,#89)<a href="#section-a.1-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-a.1-1.4">Added a streaming option using the NDJSON format (#109,#2,#106)<a href="#section-a.1-1.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-a.1-1.5">Added QLOGDIR and QLOGFILE environment variables, clarified the .well-known URL
usage (#26,#33,#51)<a href="#section-a.1-1.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-a.1-1.6">Overall tightened up the text and added more examples<a href="#section-a.1-1.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-marx-qlog-main-schema-00">
<section id="section-a.2">
        <h2 id="name-since-draft-marx-qlog-main-s">
<a href="#section-a.2" class="section-number selfRef">A.2. </a><a href="#name-since-draft-marx-qlog-main-s" class="section-name selfRef">Since draft-marx-qlog-main-schema-00:</a>
        </h2>
<ul class="normal">
<li class="normal" id="section-a.2-1.1">All field names are now lowercase (e.g., category instead of CATEGORY)<a href="#section-a.2-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-a.2-1.2">Triggers are now properties on the "data" field value, instead of separate field
types (#23)<a href="#section-a.2-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-a.2-1.3">group_ids in common_fields is now just also group_id<a href="#section-a.2-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="design-variations">
<section id="section-appendix.b">
      <h2 id="name-design-variations">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-design-variations" class="section-name selfRef">Design Variations</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-appendix.b-1.1">
          <a href="https://github.com/google/quic-trace">Quic-trace</a> takes a slightly different
approach based on protocolbuffers.<a href="#section-appendix.b-1.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-appendix.b-1.2">
          <a href="https://github.com/EricssonResearch/spindump">Spindump</a> also defines a custom
text-based format for in-network measurements<a href="#section-appendix.b-1.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-appendix.b-1.3">
          <a href="https://www.wireshark.org/">Wireshark</a> also has a QUIC dissector and its
results can be transformed into a json output format using tshark.<a href="#section-appendix.b-1.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-appendix.b-2">The idea is that qlog is able to encompass the use cases for both of these
alternate designs and that all tooling converges on the qlog standard.<a href="#section-appendix.b-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="section-appendix.c">
      <h2 id="name-acknowledgements">
<a href="#section-appendix.c" class="section-number selfRef">Appendix C. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-appendix.c-1">Thanks to Jana Iyengar, Brian Trammell, Dmitri Tikhonov, Stephen Petrides, Jari
Arkko, Marcus Ihlar, Victor Vasiliev, Mirja Kuehlewind, Jeremy Laine and Lucas
Pardue for their feedback and suggestions.<a href="#section-appendix.c-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.d">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Robin Marx</span></div>
<div dir="auto" class="left"><span class="org">Hasselt University</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:robin.marx@uhasselt.be" class="email">robin.marx@uhasselt.be</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
